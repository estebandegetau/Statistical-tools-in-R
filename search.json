[
  {
    "objectID": "syllabus.html",
    "href": "syllabus.html",
    "title": "Temario",
    "section": "",
    "text": "R es un lenguaje de computación diseñado específicamente para análisis estadístico y gráfico (Crawley 2012). El objetivo de este curso es brindar las herramientas estadísticas para resolver problemas de datos cotidianos en organizaciones grandes como el IMSS. Al final del curso podrás:\n\nResolver una variedad de preguntas empíricas usando R.\nImplementar flujos de datos automáticos desde la fuente de datos hasta medios de comunicación diversos (tablas, figuras, reportes, presentaciones, páginas web, etc.).\nUsar Quarto para escribir reportes reproducibles y GitHub para control de versiones.\n\nPrerrequisitos: Este curso asume que tienes conocimientos básicos de estadística y programación. No asumo que tengas experiencia previa con R."
  },
  {
    "objectID": "syllabus.html#objetivo",
    "href": "syllabus.html#objetivo",
    "title": "Temario",
    "section": "",
    "text": "R es un lenguaje de computación diseñado específicamente para análisis estadístico y gráfico (Crawley 2012). El objetivo de este curso es brindar las herramientas estadísticas para resolver problemas de datos cotidianos en organizaciones grandes como el IMSS. Al final del curso podrás:\n\nResolver una variedad de preguntas empíricas usando R.\nImplementar flujos de datos automáticos desde la fuente de datos hasta medios de comunicación diversos (tablas, figuras, reportes, presentaciones, páginas web, etc.).\nUsar Quarto para escribir reportes reproducibles y GitHub para control de versiones.\n\nPrerrequisitos: Este curso asume que tienes conocimientos básicos de estadística y programación. No asumo que tengas experiencia previa con R."
  },
  {
    "objectID": "syllabus.html#contenido",
    "href": "syllabus.html#contenido",
    "title": "Temario",
    "section": "Contenido",
    "text": "Contenido\n\nR y el Tidyverse\n\nEl lenguaje estadístico R\nPaquetes del Tidyverse\nManipulación de datos con dplyr\nVisualización de datos con ggplot2\nProgramación funcional con purrr\nReportes reproducibles con Quarto\n\nReferencias: Crawley (2012); Wickham, Cetinkaya-Rundel, y Grolemund (2023); Wickham (2010); Wickham (2019).\nInferencia estadística\n\nPropiedades asintóticas de los estimadores\nPruebas de hipótesis\nBootstrap y métodos de remuestreo\nSimulaciones\n\nReferencias: Aguilar Esteva (s. f.); Schmelzer (s. f.); Çetinkaya-Rundel y Hardin (2024).\nRegresión lineal\n\nMínimos cuadrados ordinarios\nInferencia estadística\nInterpretación de coeficientes\nSesgo por variables omitidas\nEfectos fijos con fixest\n\nReferencias: Aguilar Esteva (s. f.); Schmelzer (s. f.); Cunningham (2021).\nPronóstico de series de tiempo\n\nSuavización exponencial\nARIMA\nPronóstico automático con fable\n\nReferencias: Hyndman y Khandakar (2008); Hyndman y Athanasopolous (2021).\nAprendizaje de máquina\n\nSupervisado: OLS y clasificación\nNo supervisado: Componentes principales y clasificación\nElevar la práctica del modelaje con Tidymodels\n\nReferencias: Athey y Imbens (2019); James et al. (2021); Silge y Julia (s. f.)."
  },
  {
    "objectID": "syllabus.html#fechas-y-programa",
    "href": "syllabus.html#fechas-y-programa",
    "title": "Temario",
    "section": "Fechas y programa",
    "text": "Fechas y programa\nLas clases son de manera presencial en la Sala de Juntas de la CPE los Miércoles de 12 a 14 h. Tomaremos cinco clases en total del 19 de marzo al 16 de abril."
  },
  {
    "objectID": "syllabus.html#evaluación",
    "href": "syllabus.html#evaluación",
    "title": "Temario",
    "section": "Evaluación",
    "text": "Evaluación\n\nTareas: 50%\nA lo largo del curso, asignaré una tarea por cada tema. Las tareas se entregarán en la fecha indicada en clase. Pueden discutir las tareas con sus compañeros, pero cada estudiante debe entregar su propio trabajo.\nLa entrega de la tarea consta de un documento PDF con los análisis requeridos y el código de Quarto que genera el documento. Parte importante de la calificación de las tareas es que el código de Quarto corra sin errores en mi computadora.\nLas tareas serán difíciles y requerirán tiempo para completarlas. No dejen las tareas para el último día.\n\n\nProyecto final: 50%\nEl proyecto final debe cumplir con las siguientes características:\n\nAnalizar datos del IMSS.\nComunicar el análisis en un reporte reproducible de Quarto.\nExplorar alguna pregunta importante en tu trabajo.\n\nLos requisitos del proyecto final son intencionalmente vagos para permitir la creatividad y la exploración de temas que te interesen o que estén relacionados con tu trabajo.\nEl objetivo principal del proyecto final es que aprendas cómo puedes usar R y Quarto para resolver problemas cotidianos en tu trabajo.\nAlgunos ejemplos de proyectos finales son:\n\nLa automatización de (alguna porción de) algún reporte o presentación mensual que ya tengas.\nUn ejercicio de predicción de series de tiempo (por ejemplo, fijación de metas).\nUn análisis de regresión de alguna variable de interés.\nUn ejercicio de clasificación supervisada o no supervisada.\n\nCualquier otro proyecto que cumpla con los requisitos es más que bienvenido. Si tienes una idea vaga de qué podrías hacer, podemos discutirlo en clase.\n\n\n\n\n\n\nNo trabajes en Excel\n\n\n\nPuesto que el objetivo del curso es aprender a programar en R y establecer flujos de datos automatizados, no se aceptarán tareas o proyectos que usen Excel para pasos intermedios."
  },
  {
    "objectID": "syllabus.html#recursos-adicionales",
    "href": "syllabus.html#recursos-adicionales",
    "title": "Temario",
    "section": "Recursos adicionales",
    "text": "Recursos adicionales\nAdemás de las referencias en este documento, también puedes encontrar ligas de interés en la página de recursos."
  },
  {
    "objectID": "lectures.html",
    "href": "lectures.html",
    "title": "Clases",
    "section": "",
    "text": "Aquí podrás encontrar el material de las clases que veremos a lo largo del curso. Las presentaciones incluyen el código que genera todos los resultados que veremos en clase. También puedes encontrar el código fuente en la página de GitHub.\nSi tienes alguna duda, no dudes en contactarme.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nR y el Tidyverse\n\n\nClase 1\n\n\n\n19 mar 2025\n\n\n\n\n\nlecture1.qmd\n\n\n\n\n\n\n\n\n\n\n\n\n\nInferencia estadística\n\n\nClase 2\n\n\n\n26 mar 2025\n\n\n\n\n\nlecture2.qmd\n\n\n\n\n\n\n\n\n\n\n\n\n\nRegresión lineal\n\n\nClase 3\n\n\n\n2 abr 2025\n\n\n\n\n\nlecture3.qmd\n\n\n\n\n\n\n\nNo hay resultados"
  },
  {
    "objectID": "lectures/lecture2.html#contenido",
    "href": "lectures/lecture2.html#contenido",
    "title": "Inferencia estadística",
    "section": "Contenido",
    "text": "Contenido\nVamos a estudiar las herramientas básicas de probabilidad e inferencia estadística que sentarán las bases para los siguientes temas del curso.\nPara una revisión más extensa de estos temas, puedes consultar el Crash Course de estadística."
  },
  {
    "objectID": "lectures/lecture2.html#motivación",
    "href": "lectures/lecture2.html#motivación",
    "title": "Inferencia estadística",
    "section": "Motivación",
    "text": "Motivación\nLa inferencia estadística se concentra en entender y cuantificar la incertidumbre de parámetros de interés.\nYa vimos cómo resumir y graficar datos en varios contextos.\nVamos a estudiar cómo responder nuevas preguntas como:\n\n¿Los datos son diferentes para dos grupos?\n¿Los datos son representativos de la población?"
  },
  {
    "objectID": "lectures/lecture2.html#notación",
    "href": "lectures/lecture2.html#notación",
    "title": "Inferencia estadística",
    "section": "Notación",
    "text": "Notación\nGeneralmente, vamos a usar:\n\n\\(p\\) para denotar a una proporción de la población\n\\(\\hat p\\) para denotar a una proporción de una muestra\n\nIgualmente:\n\n\\(\\mu\\) para denotar a una media de la población\n\\(\\bar x\\) para denotar a una media de una muestra"
  },
  {
    "objectID": "lectures/lecture2.html#ejemplo",
    "href": "lectures/lecture2.html#ejemplo",
    "title": "Inferencia estadística",
    "section": "Ejemplo",
    "text": "Ejemplo\n\nEjemplo 1 Imaginemos que un profesor separa a sus alumnos en dos grupos: los que se sientan del lado izquierdo y los que se sientan del lado derecho.\n\nSea \\(\\hat p_L\\) la proporción de alumnos que aprueban en el grupo izquierdo, y \\(\\hat p_R\\) la proporción de alumnos que aprueban en el grupo derecho.\n¿Te sorprendería que \\(\\hat p_L \\neq \\hat p_R\\)?\n\n\n\nMientras que seguramente \\(\\hat p_L\\) sea muy parecida a \\(\\hat p_R\\), sería raro que fueran exactamente iguales.\n\n\nSeguramente observaríamos una pequeña diferencia por azar."
  },
  {
    "objectID": "lectures/lecture2.html#aleatoriedad",
    "href": "lectures/lecture2.html#aleatoriedad",
    "title": "Inferencia estadística",
    "section": "Aleatoriedad",
    "text": "Aleatoriedad\nEstudiar la aleatoriedad es una forma importante del estudio de la estadística.\n\nA lo largo del curso veremos tres maneras de cuantificar variabilidad en los datos:\n\nAleatorización\nRemuestreo (o bootstrap)\nModelos matemáticos"
  },
  {
    "objectID": "lectures/lecture2.html#contexto",
    "href": "lectures/lecture2.html#contexto",
    "title": "Inferencia estadística",
    "section": "Contexto",
    "text": "Contexto\nVamos a considerar un estudio que investigó la discriminación por género en la contratación de personal en un banco en los años 1970.\n\nLa pregunta de investigación que hacen los autores es:\n\n¿Las personas que se identifican como mujeres son discriminadas en las decisiones de promoción, hechas por gerentes que se identifican como hombres?1\n\n\nRosen y Jerdee (1974)"
  },
  {
    "objectID": "lectures/lecture2.html#datos-observados",
    "href": "lectures/lecture2.html#datos-observados",
    "title": "Inferencia estadística",
    "section": "Datos observados",
    "text": "Datos observados\n\nParticiparon 48 supervisores de sucursales bancarias, identificados como hombres, que atendieron a un curso de habilidades gerenciales en la Universidad de Carolina del Norte en 1972.\nCada supervisor recibió un archivo con información sobre un supuesto candidato a una vacante de gerente de sucursal.\nLos archivos contenían datos idénticos, excepto que la mitad de los archivos indicaban que la persona era un hombre y la otra mitad que era una mujer.\nLos archivos fueron asignados aleatoriamente entre los supervisores."
  },
  {
    "objectID": "lectures/lecture2.html#datos-observados-1",
    "href": "lectures/lecture2.html#datos-observados-1",
    "title": "Inferencia estadística",
    "section": "Datos observados",
    "text": "Datos observados\nSe recolectaron datos del sexo asociado al archivo y la decisión de promoción tomada por el supervisor.\nLos datos están disponibles en el paquete de datos de Çetinkaya-Rundel y Hardin (2024).\n\n\npacman::p_load(openintro)\n\nsex_discrimination\n\n\n\n# A tibble: 48 × 2\n   sex   decision\n   &lt;fct&gt; &lt;fct&gt;   \n 1 male  promoted\n 2 male  promoted\n 3 male  promoted\n 4 male  promoted\n 5 male  promoted\n 6 male  promoted\n 7 male  promoted\n 8 male  promoted\n 9 male  promoted\n10 male  promoted\n# ℹ 38 more rows"
  },
  {
    "objectID": "lectures/lecture2.html#datos-observados-2",
    "href": "lectures/lecture2.html#datos-observados-2",
    "title": "Inferencia estadística",
    "section": "Datos observados",
    "text": "Datos observados\n\ntally &lt;- sex_discrimination |&gt;\n    group_by(sex, decision) |&gt;\n    tally() |&gt;\n    ungroup()\n\ntally\n\n\n\n# A tibble: 4 × 3\n  sex    decision         n\n  &lt;fct&gt;  &lt;fct&gt;        &lt;int&gt;\n1 male   promoted        21\n2 male   not promoted     3\n3 female promoted        14\n4 female not promoted    10"
  },
  {
    "objectID": "lectures/lecture2.html#datos-observados-3",
    "href": "lectures/lecture2.html#datos-observados-3",
    "title": "Inferencia estadística",
    "section": "Datos observados",
    "text": "Datos observados\n\ntally |&gt;\n    pivot_wider(\n        names_from = decision,\n        values_from = n\n        ) |&gt;\n    mutate(\n        Total = promoted + `not promoted`,\n        `% promoted` = 100 * promoted / Total\n        ) |&gt;\n    # Great tables\n    gt() |&gt;\n    fmt_number(\n        columns = where(is.numeric),\n        decimals = 0\n        ) |&gt;\n    grand_summary_rows(\n        columns = !matches(\"%|sex\"),\n        fns = \"Total\" ~ sum(.)\n        )\n\n\n\n\nTabla 1: Resumen de los resultados del estudio de discriminación por género\n\n\n\n\n\n\n\nsex\npromoted\nnot promoted\nTotal\n% promoted\n\n\n\n\nmale\n21\n3\n24\n88\n\n\n\nfemale\n14\n10\n24\n58\n\n\nTotal\n—\n35\n13\n48\n—\n\n\n\n\n\n\n\n\n\n\nPromovieron al 88% de los hombres, mientras que solo promovieron al 58% de las mujeres."
  },
  {
    "objectID": "lectures/lecture2.html#pregunta-central-de-inferencia",
    "href": "lectures/lecture2.html#pregunta-central-de-inferencia",
    "title": "Inferencia estadística",
    "section": "Pregunta central de inferencia",
    "text": "Pregunta central de inferencia\n¿Tenemos evidencia suficiente para concluir que las mujeres fueron discriminadas en las decisiones de promoción?\n\nHay una diferencia grande en las tasas de promoción por género, lo que sugiere la existencia de discriminación.\n\nSin embargo, todavía no estamos seguros de que la diferencia representa discriminación o si es solo resultado de la variabilidad natural de los datos.\n\nComo en el Ejemplo 1, podríamos ver variación por azar."
  },
  {
    "objectID": "lectures/lecture2.html#prueba-de-hipótesis",
    "href": "lectures/lecture2.html#prueba-de-hipótesis",
    "title": "Inferencia estadística",
    "section": "Prueba de hipótesis",
    "text": "Prueba de hipótesis\nPara responder la pregunta de investigación, vamos a realizar una prueba de hipótesis.\n\nSea \\(p_m\\) la proporción de hombres promovidos y \\(p_f\\) la proporción de mujeres promovidas.\nLa diferencia entre las proporciones es el estimador puntual: \\(\\tau = p_m - p_f\\).\nEn el estudio de Rosen y Jerdee (1974), encontraron un \\(\\hat \\tau=\\) 0.292\n\n\nEl estimador puntual es bastante grande, pero la muestra es pequeña.\n\n\nSi no tomamos en cuenta la variabilidad de los datos, podríamos concluir que hay discriminación cuando en realidad no la hay."
  },
  {
    "objectID": "lectures/lecture2.html#prueba-de-hipótesis-1",
    "href": "lectures/lecture2.html#prueba-de-hipótesis-1",
    "title": "Inferencia estadística",
    "section": "Prueba de hipótesis",
    "text": "Prueba de hipótesis\nVamos a llamar a estas dos narrativas mutuamente excluyentes como:\n\n\n\\(H_0\\): Hipótesis nula: Las variables sex y decision son independientes.\n\nLa diferencia en tasas de promoción de 0.292 es resultado de la variabilidad natural de los datos.\nNo hay discriminación por género.\n\\(\\tau = 0\\)\n\n\n\n\\(H_A\\): Hipótesis alternativa: Las variables sex y decision no son independientes.\n\nLa diferencia en tasas de promoción de 0.292 no es resultado de la variabilidad natural de los datos.\nMujeres con las mismas credenciales que hombres son menos propensas a ser promovidas por hombres.\n\\(\\tau \\neq 0\\)"
  },
  {
    "objectID": "lectures/lecture2.html#prueba-de-hipótesis-2",
    "href": "lectures/lecture2.html#prueba-de-hipótesis-2",
    "title": "Inferencia estadística",
    "section": "Prueba de hipótesis",
    "text": "Prueba de hipótesis\nHabiendo definido el problema de inferencia, vamos a evaluar si los datos observados son tan inconsistentes con \\(H_0\\), que la hipótesis nula no puede ser razonable.\n\nSi los datos y la hipótesis nula son inconsistentes, lo que abona evidencia en favor de \\(H_A\\), tendremos que rechazar la noción de independencia y concluir que los datos proveen evidencia de discriminación por género."
  },
  {
    "objectID": "lectures/lecture2.html#variabilidad-del-estadístico",
    "href": "lectures/lecture2.html#variabilidad-del-estadístico",
    "title": "Inferencia estadística",
    "section": "Variabilidad del estadístico",
    "text": "Variabilidad del estadístico\nImaginemos que las decisiones de los banqueros son independientes del género del candidato.\n\nEntonces, si condujéramos el experimento con una nueva asignación aleatoria de los archivos, las diferencias en promoción solo serían afectadas por la variabilidad natural de los datos.\n\n\nBuena noticia: Podemos simular la aleatorización, para ver qué hubiera pasado si las decisiones de los banqueros fueran independientes del género, pero con una distribución de archivos distinta."
  },
  {
    "objectID": "lectures/lecture2.html#simulación-de-aleatorización",
    "href": "lectures/lecture2.html#simulación-de-aleatorización",
    "title": "Inferencia estadística",
    "section": "Simulación de aleatorización",
    "text": "Simulación de aleatorización\n\nset.seed(2025)\n\noptions &lt;- c(\"promoted\", \"not promoted\")\n\nsim &lt;- tibble(\n    sex = c(rep(\"female\", 24), rep(\"male\", 24)),\n    decision = sample(options, size = 48, replace = TRUE)\n)\n\n\n\n\n\n\n\n\nTabla 2: Resumen de los resultados simulados de discriminación por género\n\n\n\n\n\n\n\nsex\nnot promoted\npromoted\nTotal\n% promoted\n\n\n\n\nfemale\n9\n15\n24\n62\n\n\n\nmale\n11\n13\n24\n54\n\n\nTotal\n—\n20\n28\n48\n—\n\n\n\n\n\n\n\n\n\n\n\nLa Tabla 2 muestra que la diferencia en las tasas de promoción entre hombres y mujeres es de \\(\\hat \\tau =\\) -0.083.\n\n\nEn este mundo simulado, los hombres tuvieron una tasa de contratación menor que las mujeres."
  },
  {
    "objectID": "lectures/lecture2.html#estadístico-de-prueba",
    "href": "lectures/lecture2.html#estadístico-de-prueba",
    "title": "Inferencia estadística",
    "section": "Estadístico de prueba",
    "text": "Estadístico de prueba\nHemos hablado de la diferencia en las tasas de contratación, \\(\\tau = p_m - p_f\\), como el estimador de interés que nos ayudará a evaluar la hipótesis del experimento.\n\nTambién hemos visto que el estimador puntual tiene una variabilidad natural: que ante diferentes asignaciones de archivos, la diferencia en tasas de contratación puede variar.\n\n\n¿Cómo podemos entender cuál es la variabilidad natural de \\(\\tau\\) de muestra a muestra?"
  },
  {
    "objectID": "lectures/lecture2.html#estadístico-de-prueba-1",
    "href": "lectures/lecture2.html#estadístico-de-prueba-1",
    "title": "Inferencia estadística",
    "section": "Estadístico de prueba",
    "text": "Estadístico de prueba\nPara evaluar si el estimador observado durante el experimento, \\(\\tau =\\) 0.292, podemos calcular el estimador de \\(\\tau\\) para cientos de simulaciones diferentes.\n\nEsto nos permitirá entender cuál es la variabilidad natural de \\(\\tau\\) y si el valor observado es consistente con la hipótesis nula."
  },
  {
    "objectID": "lectures/lecture2.html#simulación-de-100-aleatorizaciones",
    "href": "lectures/lecture2.html#simulación-de-100-aleatorizaciones",
    "title": "Inferencia estadística",
    "section": "Simulación de 100 aleatorizaciones",
    "text": "Simulación de 100 aleatorizaciones\nHay muchas maneras de repetir tareas en R.\n\nVamos a ver la función purrr::map() que nos permite mapear una función a una lista de argumentos.\n\n\nPrimero, escribimos una función que simula una asignación aleatoria de archivos.\n\n\n\nmy_simulate &lt;- function(i) {\n    sim &lt;- tibble(\n        sex = c(rep(\"female\", 24), rep(\"male\", 24)),\n        decision = sample(options, size = 48, replace = TRUE)\n    )\n\n    return(sim)\n}\n\n\nmy_simulate(1)\n\n\n\n# A tibble: 48 × 2\n   sex    decision    \n   &lt;chr&gt;  &lt;chr&gt;       \n 1 female not promoted\n 2 female promoted    \n 3 female promoted    \n 4 female promoted    \n 5 female promoted    \n 6 female promoted    \n 7 female promoted    \n 8 female not promoted\n 9 female not promoted\n10 female not promoted\n# ℹ 38 more rows"
  },
  {
    "objectID": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-1",
    "href": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-1",
    "title": "Inferencia estadística",
    "section": "Simulación de 100 aleatorizaciones",
    "text": "Simulación de 100 aleatorizaciones\nCada vez que llamamos a my_simulate(), obtenemos una nueva asignación aleatoria de archivos.\n\nPodemos repetir el proceso \\(k\\) veces, para obtener \\(k\\) asignaciones aleatorias de archivos.\n\n\nPara cada uno de los \\(k\\) experimentos, purrr::map() va a guardar en la variable sim una tabla con los resultados de la simulación.\n\n\n\nk &lt;- 100\n\nsimulations &lt;- tibble(\n    k = 1:k\n    ) |&gt;\n    mutate(\n        sim = map(k, my_simulate)\n    )\n\nsimulations\n\n\n\n# A tibble: 100 × 2\n       k sim              \n   &lt;int&gt; &lt;list&gt;           \n 1     1 &lt;tibble [48 × 2]&gt;\n 2     2 &lt;tibble [48 × 2]&gt;\n 3     3 &lt;tibble [48 × 2]&gt;\n 4     4 &lt;tibble [48 × 2]&gt;\n 5     5 &lt;tibble [48 × 2]&gt;\n 6     6 &lt;tibble [48 × 2]&gt;\n 7     7 &lt;tibble [48 × 2]&gt;\n 8     8 &lt;tibble [48 × 2]&gt;\n 9     9 &lt;tibble [48 × 2]&gt;\n10    10 &lt;tibble [48 × 2]&gt;\n# ℹ 90 more rows"
  },
  {
    "objectID": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-2",
    "href": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-2",
    "title": "Inferencia estadística",
    "section": "Simulación de 100 aleatorizaciones",
    "text": "Simulación de 100 aleatorizaciones\nLa columna sim es un objeto de tipo list que contiene las tablas con los resultados de cada simulación.\n\nLos objetos list son muy versátiles en R y nos permiten guardar diferentes tipos de datos en una sola variable.\n\n\nEn este caso, es como si hubiéramos escrito:\n\nsim = list(my_simulate(1), my_simulate(2), ..., my_simulate(100))\n\n\n\n\n\n\nPodemos acceder a los resultados de la primera simulación con la siguiente notación:\n\nsimulations$sim[[1]]\n\n\n\n# A tibble: 48 × 2\n   sex    decision    \n   &lt;chr&gt;  &lt;chr&gt;       \n 1 female not promoted\n 2 female promoted    \n 3 female not promoted\n 4 female not promoted\n 5 female promoted    \n 6 female promoted    \n 7 female promoted    \n 8 female promoted    \n 9 female promoted    \n10 female not promoted\n# ℹ 38 more rows\n\n\n\n\nTambién puedes inspeccionar los contenidos de una lista con glimpse(simulations$sim)."
  },
  {
    "objectID": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-3",
    "href": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-3",
    "title": "Inferencia estadística",
    "section": "Simulación de 100 aleatorizaciones",
    "text": "Simulación de 100 aleatorizaciones\nYa tenemos nuestras 100 simulaciones guardadas en la tabla simulations.\n\nLa ventaja de trabajar con listas de datos es que podemos pasar funciones a cada elemento de la lista, de la misma manera en la que lo hicimos con my_simulate().\n\nUsamos un purrr::map_dbl() que regresará un valor numérico dentro de un verbo dplyr::mutate().\n\n\n\nVamos a calcular el estadístico de interés \\(\\tau\\) para cada una de las 100 simulaciones.\n\n\n\n\nsimulations &lt;- simulations |&gt;\n    mutate(\n        females_promoted = map_dbl(sim, \\(x) x |&gt;\n            filter(sex == \"female\") |&gt;\n            mutate(\n                promoted = decision == \"promoted\"\n            ) |&gt;\n            pull(promoted) |&gt;\n            mean()),\n        males_promoted = map_dbl(sim, \\(x) x |&gt;\n            filter(sex == \"male\") |&gt;\n            mutate(\n                promoted = decision == \"promoted\"\n            ) |&gt;\n            pull(promoted) |&gt;\n            mean()),\n        tau = males_promoted - females_promoted\n    ) |&gt;\n    select(k, females_promoted, males_promoted, tau)\n\nsimulations\n\n\n# A tibble: 100 × 4\n       k females_promoted males_promoted     tau\n   &lt;int&gt;            &lt;dbl&gt;          &lt;dbl&gt;   &lt;dbl&gt;\n 1     1            0.542          0.333 -0.208 \n 2     2            0.417          0.542  0.125 \n 3     3            0.417          0.208 -0.208 \n 4     4            0.417          0.5    0.0833\n 5     5            0.625          0.458 -0.167 \n 6     6            0.458          0.542  0.0833\n 7     7            0.458          0.625  0.167 \n 8     8            0.542          0.542  0     \n 9     9            0.458          0.542  0.0833\n10    10            0.583          0.5   -0.0833\n# ℹ 90 more rows"
  },
  {
    "objectID": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-4",
    "href": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-4",
    "title": "Inferencia estadística",
    "section": "Simulación de 100 aleatorizaciones",
    "text": "Simulación de 100 aleatorizaciones\nVisualicemos la distribución de \\(\\tau\\) para las 100 simulaciones y comparémosla con el valor observado en el experimento.\n\n\nggplot() +\n    geom_dotplot(data = simulations, aes(x = tau)) +\n    scale_y_continuous(breaks = NULL) +\n    geom_vline(\n        xintercept = obs_effect,\n        color = \"blue\",\n        linetype = \"dashed\") +\n    geom_vline(xintercept = 0) +\n    labs(\n        x = expression(tau),\n        y = \"\"\n    ) \n\n\n\n\n\n\n\n\nFigura 1: Distribución de la diferencia en tasas de promoción"
  },
  {
    "objectID": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-5",
    "href": "lectures/lecture2.html#simulación-de-100-aleatorizaciones-5",
    "title": "Inferencia estadística",
    "section": "Simulación de 100 aleatorizaciones",
    "text": "Simulación de 100 aleatorizaciones\nLa Figura 1 muestra que, de las cien simulaciones que tenemos, solo hubo dos en las que la diferencia en tasas de promoción fue tan grande como la observada en el experimento.\n\nOtra forma de decir esto es: la probabilidad de observar un estadístico de prueba tan extremo como el observado, si no hubiera discriminación por género, es de 2%.\n\n\nPregunta: ¿Qué dice la Figura 1 sobre la hipótesis nula? ¿Qué conclusión podemos sacar sobre la discriminación por género en el banco?"
  },
  {
    "objectID": "lectures/lecture2.html#resumen",
    "href": "lectures/lecture2.html#resumen",
    "title": "Inferencia estadística",
    "section": "Resumen",
    "text": "Resumen\n\nHemos cuantificado cuál es la variabilidad natural de la diferencia en tasas de promoción, \\(\\tau\\), si las decisiones de los banqueros fueran independientes del género del candidato.\nHemos comparado el valor observado en el experimento con la distribución de \\(\\tau\\) bajo la hipótesis nula.\nHemos calculado la probabilidad de observar un valor tan extremo como el observado, si la hipótesis nula fuera cierta.\nSi concluyéramos que hubo discriminación por género, la probabilidad de equivocarnos sería de 2%."
  },
  {
    "objectID": "lectures/lecture2.html#nuestra-prueba-de-hipótesis",
    "href": "lectures/lecture2.html#nuestra-prueba-de-hipótesis",
    "title": "Inferencia estadística",
    "section": "Nuestra prueba de hipótesis",
    "text": "Nuestra prueba de hipótesis\nRecordemos la prueba de hipótesis que propusimos para evaluar el estudio de discriminación por género en el banco de Rosen y Jerdee (1974):\n\n\\(H_0\\): El género no tiene efecto en las decisiones de promoción.\n\\(H_A\\): Las candidatas mujeres enfrentan discriminación en las decisiones de promoción.\n\n\nEncontramos que la probabilidad de que \\(H_0\\) sea cierta es de 2%: Solo en dos de nuestras 100 simulaciones encontramos una diferencia en promociones tan grande como la observada."
  },
  {
    "objectID": "lectures/lecture2.html#dos-tipos-de-errores",
    "href": "lectures/lecture2.html#dos-tipos-de-errores",
    "title": "Inferencia estadística",
    "section": "Dos tipos de errores",
    "text": "Dos tipos de errores\nA la hora de evaluar la prueba de hipótesis, podríamos cometer dos tipos de errores:\n\nError tipo I: Rechazar la hipótesis nula siendo que ésta es verdadera.\nError tipo II: No rechazar la hipótesis nula siendo que ésta es falsa."
  },
  {
    "objectID": "lectures/lecture2.html#valor-p",
    "href": "lectures/lecture2.html#valor-p",
    "title": "Inferencia estadística",
    "section": "Valor \\(p\\)\n",
    "text": "Valor \\(p\\)\n\nLa probabilidad del 2% que encontramos es lo que llamamos valor-p.\n\nEsta probabilidad cuantifica la fuerza de la evidencia en contra de la hipótesis nula, dados los datos observados.\n\n\nCuando el valor-p es pequeño, es decir, menor que un nivel predeterminado, decimos que los resultados estadísticamente significativos.\n\n\nOtra manera de interpretar el valor-p es como la probabilidad del error tipo I: la probabilidad de rechazar la hipótesis nula siendo que ésta es verdadera."
  },
  {
    "objectID": "lectures/lecture2.html#significancia-estadística",
    "href": "lectures/lecture2.html#significancia-estadística",
    "title": "Inferencia estadística",
    "section": "Significancia estadística",
    "text": "Significancia estadística\nNormalmente, denotamos con un \\(\\alpha\\) el nivel de significancia que estamos dispuestos a aceptar.\n\nEn ciencias sociales, es común hablar de resultados significativos con p-valores menores a 0.05.\n\n\nEn nuestro caso, con un valor-p de 0.02, podemos concluir que los resultados son significativos al nivel de \\(\\alpha = 0.05\\), rechazando la hipótesis nula."
  },
  {
    "objectID": "lectures/lecture2.html#intervalos-de-confianza-1",
    "href": "lectures/lecture2.html#intervalos-de-confianza-1",
    "title": "Inferencia estadística",
    "section": "Intervalos de confianza",
    "text": "Intervalos de confianza\nLos intervalos de confianza son una herramienta poderosa para visualizar y comunicar la certeza asociada a un estimador, es decir, a un resultado de un experimento o análisis."
  },
  {
    "objectID": "lectures/lecture2.html#preguntas-de-interés",
    "href": "lectures/lecture2.html#preguntas-de-interés",
    "title": "Inferencia estadística",
    "section": "Preguntas de interés",
    "text": "Preguntas de interés\nAdemás de ayudarnos a visualizar la variabilidad de un estimador, los intervalos de confianza nos permiten voltear la pregunta ed la significancia estadística.\n\nMientras que el valor-p nos dice cuál es la probabilidad equivocarnos al rechazar la hipótesis nula, los intervalos de confianza nos dicen qué rango de valores podría tomar el estimador observado en el experimento."
  },
  {
    "objectID": "lectures/lecture2.html#resultados-del-experimento",
    "href": "lectures/lecture2.html#resultados-del-experimento",
    "title": "Inferencia estadística",
    "section": "Resultados del experimento",
    "text": "Resultados del experimento\nPodemos resumir la evidencia del experimento de discriminación por género usando la función ggplot2::stat_summary().\n\nPor defecto, stat_summary() calcula la media y el intervalo de confianza del 95% del aesthetic y.\n\n\n\nsex_discrimination &lt;- sex_discrimination |&gt;\n    mutate(\n        promoted = as.numeric(decision == \"promoted\")\n    ) \n\nsex_discrimination |&gt;\n    ggplot(aes(x = sex, y = promoted)) +\n    stat_summary() +\n    labs(\n        x = \"Sexo\",\n        y = \"Proporción de promociones\",\n        title = \"Proporción de promociones por género\",\n        subtitle = \"Intervalos de confianza del 95%\"\n    ) +\n    scale_y_continuous(labels = scales::percent) \n\n\n\n\n\n\n\n\nFigura 2: Proporción de promociones por género\n\n\n\n\n\n\nLa Figura 2 muestra que la hipótesis nula se puede rechazar con un nivel de significancia del 5%, porque los intervalos de confianza no se traslapan."
  },
  {
    "objectID": "lectures/lecture2.html#interpretación-de-los-intervalos-de-confianza",
    "href": "lectures/lecture2.html#interpretación-de-los-intervalos-de-confianza",
    "title": "Inferencia estadística",
    "section": "Interpretación de los intervalos de confianza",
    "text": "Interpretación de los intervalos de confianza\nUn intervalo de confianza del 95% para un estimador \\(\\hat \\theta\\) es un rango de valores que contiene al verdadero valor del parámetro \\(\\theta\\) con una probabilidad del 95%.\n\nEn el estudio de Rosen y Jerdee (1974), encontramos el rango de valores que contiene al verdadero valor de \\(\\tau = p_m - p_f\\) con una probabilidad del 95%."
  },
  {
    "objectID": "lectures/lecture2.html#la-distribución-del-ingreso-en-méxico",
    "href": "lectures/lecture2.html#la-distribución-del-ingreso-en-méxico",
    "title": "Inferencia estadística",
    "section": "La distribución del ingreso en México",
    "text": "La distribución del ingreso en México\nUsemos el vector de ingresos de la ENIGH 2022.\n\nload(\"//IMSS-EDS/Users/esteban.degetau/OneDrive - INSTITUTO TECNOLOGICO AUTONOMO DE MEXICO/Documentos/My courses/Statistical tools in R/assignments/data/ingresos.rda\")\n\nmy_win &lt;- function(x, p) {\n    left &lt;- quantile(x, p)\n    right &lt;- quantile(x, 1 - p)\n    x[x &lt; left] &lt;- left\n    x[x &gt; right] &lt;- right\n    return(x)\n}\n\ningresos &lt;- my_win(ingresos, 0.01)\nhist(ingresos, main = \"Distribución del ingreso\", xlab = \"Ingreso mensual\")"
  },
  {
    "objectID": "lectures/lecture2.html#el-promedio-del-ingreso",
    "href": "lectures/lecture2.html#el-promedio-del-ingreso",
    "title": "Inferencia estadística",
    "section": "El promedio del ingreso",
    "text": "El promedio del ingreso\nPuesto que la ENIGH es una encuesta, y no un censo, el promedio, o la media muestral \\(\\bar x\\), es un estimador del ingreso promedio de la población.\n\n\nmean(ingresos)\n\n\n\n[1] 5345.368\n\n\n\n\nSi el muestreo de la ENIGH hubiera sido diferente, el promedio de la muestra también sería diferente."
  },
  {
    "objectID": "lectures/lecture2.html#el-promedio-del-ingreso-1",
    "href": "lectures/lecture2.html#el-promedio-del-ingreso-1",
    "title": "Inferencia estadística",
    "section": "El promedio del ingreso",
    "text": "El promedio del ingreso\nPodemos simular un muestreo diferente para entender la variabilidad natural de la media muestral.\n\n\nn_hogares &lt;- length(ingresos)\n\ningresos_sample &lt;- sample(ingresos, size = n_hogares, replace = TRUE)\n\nmean(ingresos_sample)\n\n\n\n[1] 5334.812\n\n\n\n\nUna muestra diferente genera un valor de la media muestral diferente."
  },
  {
    "objectID": "lectures/lecture2.html#distribución-de-la-media-muestral",
    "href": "lectures/lecture2.html#distribución-de-la-media-muestral",
    "title": "Inferencia estadística",
    "section": "Distribución de la media muestral",
    "text": "Distribución de la media muestral\nSi la media muestral es un estimador, tiene una variabilidad asociada, porque cada vez que muestreamos, obtenemos un valor diferente.\n\n¿Cuál es la variabilidad de la media muestral?\n\n\n\nsample_means &lt;- replicate(\n    n = 1000,\n    expr = mean(\n        sample(\n            x = ingresos,\n            size = n_hogares,\n            replace = TRUE\n        )\n    )\n)\nhist(sample_means, main = \"Distribución de la media del ingreso\", xlab = \"Media muestral\")"
  },
  {
    "objectID": "lectures/lecture2.html#teorema-central-del-límite",
    "href": "lectures/lecture2.html#teorema-central-del-límite",
    "title": "Inferencia estadística",
    "section": "Teorema Central del Límite",
    "text": "Teorema Central del Límite\n\nTeorema 1 Sea \\(\\{Y_1, Y_2, \\ldots, Y_n\\}\\) una muestra aleatoria de una población con media \\(\\mu\\) y varianza \\(\\sigma^2\\). Entonces,\n\\[\nZ=\\sqrt{n}\\cdot \\frac{\\bar Y - \\mu}{\\sigma } \\to^d N(0, 1)\n\\]\nconforme \\(n \\to \\infty\\).\n\nDonde:\n\n\\(Z\\) es la variable estandarizada de la media muestral \\(\\bar Y\\).\n\\(\\mu\\) es la media poblacional de \\(Y\\).\n\\(\\sigma\\) es la desviación estándar poblacional de \\(Y\\).\n\\(N(0, 1)\\) es la distribución normal estándar.\n\n\nEs decir, sin importar la distribución poblacional de \\(Y\\), la distribución de la variable \\(Z_n\\) (que es una versión estandarizada de \\(\\bar Y_n\\)) converge a una distribución normal estándar conforme el tamaño de la muestra aumenta."
  },
  {
    "objectID": "lectures/lecture2.html#visualización-del-tcl",
    "href": "lectures/lecture2.html#visualización-del-tcl",
    "title": "Inferencia estadística",
    "section": "Visualización del TCL",
    "text": "Visualización del TCL\n\nsample_standardized &lt;- sample_means |&gt;\n    scale() |&gt;\n    as.vector()\n\nhist(sample_standardized, main = \"Distribución de la media estandarizada\", xlab = \"Media estandarizada\")"
  },
  {
    "objectID": "lectures/lecture2.html#el-tamaño-de-la-muestra",
    "href": "lectures/lecture2.html#el-tamaño-de-la-muestra",
    "title": "Inferencia estadística",
    "section": "El tamaño de la muestra",
    "text": "El tamaño de la muestra\nEl tamaño de la muestra afecta fuertemente la variabilidad de la media muestral.\n\nsmall_sample_means &lt;- replicate(\n    n = 1000,\n    expr = mean(\n        sample(\n            x = ingresos,\n            size = 10,\n            replace = TRUE\n        )\n    )\n)\n\nsmall_sample_standardized &lt;- small_sample_means |&gt;\n    scale() |&gt;\n    as.vector()\n\nhist(\n    small_sample_standardized,\n    main = \"Distribución de la media estandarizada\",\n    xlab = \"Media estandarizada\"\n)"
  },
  {
    "objectID": "lectures/lecture2.html#intervalos-de-confianza-3",
    "href": "lectures/lecture2.html#intervalos-de-confianza-3",
    "title": "Inferencia estadística",
    "section": "Intervalos de confianza",
    "text": "Intervalos de confianza\nQuiero formalizar la discusión previa sobre los intervalos de confianza.\n\nRecordemos que los intervalos de confianza buscan un rango de valores en el que el verdadero valor del parámetro de interés \\(\\theta\\) puede estar.\n\n\nEn el caso de la media muestral \\(\\bar Y\\), el parámetro poblacional de interés es el promedio \\(\\mu\\)."
  },
  {
    "objectID": "lectures/lecture2.html#de-las-observaciones",
    "href": "lectures/lecture2.html#de-las-observaciones",
    "title": "Inferencia estadística",
    "section": "95% de las observaciones",
    "text": "95% de las observaciones\nPodemos encontrar los valores que contienen el 95% de las observaciones de la media muestral \\(\\bar Y\\), de dos maneras:\n\nUsando la distribución (estandarizada) de medias muestrales que generamos:\n\n\n\nsamples &lt;- tibble(\n    means = sample_means,\n    means_standardized = sample_standardized\n) \n\nleft &lt;- quantile(sample_standardized, 0.025)\nright &lt;- quantile(sample_standardized, 0.975)\n\nsamples |&gt;\n    ggplot(aes(x = means_standardized)) +\n    geom_histogram(aes(y = ..density..), bins = 30) +\n    geom_vline(xintercept = left, color = \"red\") +\n    geom_vline(xintercept = right, color = \"red\") +\n    geom_vline(xintercept = 0, color = \"blue\")"
  },
  {
    "objectID": "lectures/lecture2.html#de-las-observaciones-1",
    "href": "lectures/lecture2.html#de-las-observaciones-1",
    "title": "Inferencia estadística",
    "section": "95% de las observaciones",
    "text": "95% de las observaciones\nO bien,\n\nUsando el teorema central del límite.\n\n\n\nleft &lt;- qnorm(0.025)\nright &lt;- qnorm(0.975)\n\nsamples |&gt;\n    ggplot(aes(x = means_standardized)) +\n    geom_histogram(aes(y = ..density..), bins = 30) +\n    geom_vline(xintercept = left, color = \"red\") +\n    geom_vline(xintercept = right, color = \"red\") +\n    geom_vline(xintercept = 0, color = \"blue\")"
  },
  {
    "objectID": "lectures/lecture2.html#intervalos-de-confianza-analíticos",
    "href": "lectures/lecture2.html#intervalos-de-confianza-analíticos",
    "title": "Inferencia estadística",
    "section": "Intervalos de confianza analíticos\n",
    "text": "Intervalos de confianza analíticos\n\nPara encontrar los valores del ingreso que acumulen el 95% de probabilidad de contener el verdadero valor del parámetro de interés, el promedio poblacional \\(\\mu\\), usamos la siguiente fórmula:\n\\[\nSE = \\frac{\\sigma}{\\sqrt{n}}\n\\]\n\\[\nCI = \\bar Y \\pm z_{\\alpha/2} \\cdot ES\n\\]\nDonde:\n\n\\(\\sigma\\) es la desviación estándar de la población\n\\(n\\) es el tamaño de la muestra\n\\(SE\\) decimos que es el error estándar\n\\(z_{\\alpha/2}\\) es el valor crítico de la distribución normal estándar que corresponde a un nivel de confianza del \\(1-\\alpha\\)."
  },
  {
    "objectID": "lectures/lecture2.html#intervalos-de-confianza-analíticos-1",
    "href": "lectures/lecture2.html#intervalos-de-confianza-analíticos-1",
    "title": "Inferencia estadística",
    "section": "Intervalos de confianza analíticos\n",
    "text": "Intervalos de confianza analíticos\n\n\nse &lt;- sd(ingresos) / sqrt(n_hogares)\nci &lt;- c(\n    mean(ingresos) - qnorm(0.975) * se,\n    mean(ingresos) + qnorm(0.975) * se\n)\n\n\nsamples |&gt;\n    ggplot(aes(x = means)) +\n    geom_histogram(aes(y = ..density..), bins = 30) +\n    geom_vline(xintercept = ci[1], color = \"red\") +\n    geom_vline(xintercept = ci[2], color = \"red\") +\n    geom_vline(xintercept = mean(ingresos), color = \"blue\") +\n    scale_x_continuous(\n        labels = scales::dollar_format(),\n        breaks = seq(mean(ingresos) - 3 * se, mean(ingresos) + 3 * se, by = se)\n        ) +\n    labs(\n        x = \"Ingerso mensual\"\n    )"
  },
  {
    "objectID": "lectures/lecture2.html#intervalos-de-confianza-con-bootstrap",
    "href": "lectures/lecture2.html#intervalos-de-confianza-con-bootstrap",
    "title": "Inferencia estadística",
    "section": "Intervalos de confianza con bootstrap\n",
    "text": "Intervalos de confianza con bootstrap\n\nEl método de bootstrap es una forma de estimar la variabilidad de un estimador, introduciendo aleatoriedad con remuestreo a partir de una sola muestra.\n\nEs muy útil para estimar la variabilidad de un estimador cuando no tenemos una idea clara de la distribución de la población.\n\n\nPor ejemplo:\n\\[\nVar(\\bar Y) = \\frac{\\sigma^2}{n}\n\\]\n\n\n¿Cómo se distribuye \\(Var(\\bar Y)\\)? El Teorema Central del Límite no nos puede ayudar aquí."
  },
  {
    "objectID": "lectures/lecture2.html#intervalos-de-confianza-con-bootstrap-1",
    "href": "lectures/lecture2.html#intervalos-de-confianza-con-bootstrap-1",
    "title": "Inferencia estadística",
    "section": "Intervalos de confianza con bootstrap\n",
    "text": "Intervalos de confianza con bootstrap\n\nPodemos inferir la distribución de un estimador cualquiera \\(\\bar Y\\) empíricamente usando el método de bootstrap.\n\nUtilizando las observaciones de la muestra, elige una submuestra aleatoria de tamaño \\(n\\) (mismo tamaño que la muestra) con reemplazo. Esto hará que algunas observaciones se repitan y otras no aparezcan.\nCalcula el estimador \\(\\bar Y\\) para la submuestra.\nRepite los pasos anteriores \\(M\\) veces. Esto te dará \\(M\\) observaciones para \\(\\bar Y:{\\bar Y_1, \\bar Y_2, \\ldots, \\bar Y_M}\\).\nEncuentra el intervalo de confianza del 95% para \\(\\bar Y\\) usando los percentiles 2.5 y 97.5 de la distribución empírica de \\(\\bar Y\\)."
  },
  {
    "objectID": "lectures/lecture2.html#intervalos-de-confianza-con-bootstrap-2",
    "href": "lectures/lecture2.html#intervalos-de-confianza-con-bootstrap-2",
    "title": "Inferencia estadística",
    "section": "Intervalos de confianza con bootstrap\n",
    "text": "Intervalos de confianza con bootstrap\n\nPara nuestra suerte, las medias muestrales que calculé en el vector sample_means son el resultado de un remuestreo con reemplazo, con bootstrap, de tamaño \\(M=1000\\).\n\nsamples |&gt;\n    ggplot(aes(x = means)) +\n    stat_ecdf() +\n    geom_hline(\n        yintercept = 0.025,\n        color = \"red\",\n        linetype = \"dashed\"\n    ) +\n    geom_hline(\n        yintercept = 0.975,\n        color = \"red\",\n        linetype = \"dashed\"\n    ) +\n    labs(\n        x = \"Ingreso mensual\",\n        y = \"Proporción de observaciones\",\n    )"
  },
  {
    "objectID": "lectures/lecture2.html#intervalos-de-confianza-con-bootstrap-3",
    "href": "lectures/lecture2.html#intervalos-de-confianza-con-bootstrap-3",
    "title": "Inferencia estadística",
    "section": "Intervalos de confianza con bootstrap\n",
    "text": "Intervalos de confianza con bootstrap\n\n\nleft &lt;- sample_means |&gt;\n    quantile(0.025)\n\nright &lt;- sample_means |&gt;\n    quantile(0.975)\n\n\nsamples |&gt;\n    ggplot(aes(x = means)) +\n    geom_histogram(aes(y = ..density..), bins = 30) +\n    geom_vline(xintercept = left, color = \"red\") +\n    geom_vline(xintercept = right, color = \"red\") +\n    geom_vline(xintercept = mean(ingresos), color = \"blue\") +\n    scale_x_continuous(\n        labels = scales::dollar_format(),\n        breaks = seq(mean(ingresos) - 3 * se, mean(ingresos) + 3 * se, by = se)\n        ) +\n    labs(\n        x = \"Ingerso mensual\"\n    )"
  },
  {
    "objectID": "lectures/lecture2.html#intervalos-analíticos-vs.-bootstrap",
    "href": "lectures/lecture2.html#intervalos-analíticos-vs.-bootstrap",
    "title": "Inferencia estadística",
    "section": "Intervalos analíticos vs. bootstrap\n",
    "text": "Intervalos analíticos vs. bootstrap\n\n\nPor construcción, los intervalos analíticos siempre son simétricos.\nLos intervalos bootstrap pueden ser asimétricos.\nCon muestras grandes como la de la ENIGH, los intervalos analíticos y bootstrap son muy parecidos."
  },
  {
    "objectID": "lectures/lecture2.html#inferencia-analítica-vs.-inferencia-bootstrap",
    "href": "lectures/lecture2.html#inferencia-analítica-vs.-inferencia-bootstrap",
    "title": "Inferencia estadística",
    "section": "Inferencia analítica vs. inferencia bootstrap\n",
    "text": "Inferencia analítica vs. inferencia bootstrap\n\n\n\nLa inferencia analítica es muy útil cuando conocemos la distribución del estimador: cuando calculamos promedios.\n\nEn el mundo de los promedios, será muy cómodo usar la fórmula:\n\n\\[\n  IC = \\bar Y \\pm 1.94 \\cdot \\frac{\\sigma}{\\sqrt{n}}\n  \\]\n\nPara todo lo demás (varianza, medianas, índices sin unidades), la inferencia bootstrap es una herramienta poderosa para entender la variabilidad de un estimador y evaluar pruebas de hipótesis más complejas que la diferencia de promedios."
  },
  {
    "objectID": "lectures/lecture2.html#resumen-1",
    "href": "lectures/lecture2.html#resumen-1",
    "title": "Inferencia estadística",
    "section": "Resumen",
    "text": "Resumen\n\nVimos cómo evaluar pruebas de hipótesis con aleatorización con el ejemplo de discriminación por género en el banco, con valores-p e intervalos de confianza.\nVimos cómo evaluar pruebas de hipótesis de manera analítica usando el Teorema Central del Límite.\nVimos cómo evaluar pruebas de hipótesis a partir de remuestreo usando el método de bootstrap."
  },
  {
    "objectID": "lectures/lecture2.html#referencias",
    "href": "lectures/lecture2.html#referencias",
    "title": "Inferencia estadística",
    "section": "Referencias",
    "text": "Referencias\n\n\n\n\nAguilar Esteva, Arturo. s. f. «Notas de Microeconometría». https://bookdown.org/viclzrz/notasmicro/.\n\n\nÇetinkaya-Rundel, Mine, y Johanna Hardin. 2024. Introduction to Modern Statistics. Vereinigte Staaten: OpenIntro, Inc. https://openintro-ims.netlify.app/.\n\n\nRosen, Benson, y Thomas H. Jerdee. 1974. «Influence of Sex Role Stereotypes on Personnel Decisions». Journal of Applied Psychology 59 (1): 9-14. https://doi.org/10.1037/h0035834."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Herramientas estadísticas en R",
    "section": "",
    "text": "Bienvenidx a la página del curso de Herramientas Estadísticas en R.\nEste curso cubrirá varias técnicas estadísticas y cómo implementarlas utilizando el lenguaje de programación R.\nPuedes consultar el temario del curso aquí."
  },
  {
    "objectID": "index.html#clases",
    "href": "index.html#clases",
    "title": "Herramientas estadísticas en R",
    "section": "Clases",
    "text": "Clases\n\n\n   \n     \n     \n       Ordenar por\n       Por defecto\n         \n          Fecha - Menos reciente\n        \n         \n          Fecha - Más reciente\n        \n         \n          Título\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\nTítulo\n\n\nSubtítulo\n\n\nFecha\n\n\n\n\n\n\nR y el Tidyverse\n\n\nClase 1\n\n\n19 mar 2025\n\n\n\n\nInferencia estadística\n\n\nClase 2\n\n\n26 mar 2025\n\n\n\n\nRegresión lineal\n\n\nClase 3\n\n\n2 abr 2025\n\n\n\n\n\nNo hay resultados"
  },
  {
    "objectID": "index.html#tareas",
    "href": "index.html#tareas",
    "title": "Herramientas estadísticas en R",
    "section": "Tareas",
    "text": "Tareas\n\n\n   \n     \n     \n       Ordenar por\n       Por defecto\n         \n          Fecha - Menos reciente\n        \n         \n          Fecha - Más reciente\n        \n         \n          Título\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\nTítulo\n\n\nSubtítulo\n\n\nFecha\n\n\n\n\n\n\nInstalación del software\n\n\nTarea 0\n\n\n14 mar 2025\n\n\n\n\nIntroducción a la ciencia de datos con R\n\n\nTarea 1\n\n\n20 mar 2025\n\n\n\n\n\nNo hay resultados"
  },
  {
    "objectID": "assignments/assignment1/solutions.html",
    "href": "assignments/assignment1/solutions.html",
    "title": "Introducción a R",
    "section": "",
    "text": "La Tarea 1 debe entregarse el jueves 27 de marzo. La entrega consiste en un archivo PDF que incluya las respuestas a las preguntas planteadas, así como el código .qmd que generó las respuestas. Para descargar el archivo .qmd, haz clic aquí.\nEscribe todas tus respuestas en la sección de respuestas al final de este archivo.\nEscribe tu nombre en el campo author del YAML."
  },
  {
    "objectID": "assignments/assignment1/solutions.html#outliers-datos-atípicos",
    "href": "assignments/assignment1/solutions.html#outliers-datos-atípicos",
    "title": "Introducción a R",
    "section": "1.1 Outliers: Datos atípicos",
    "text": "1.1 Outliers: Datos atípicos\nUn problema común en el análisis de datos es cómo tratar con datos atípicos: aquellos valores que difieren significativamente del resto de los datos. Dos soluciones estándar son:\n\nTruncar los datos: eliminando los datos atípicos\nWinsorizar los datos: reemplazando los datos atípicos por un valor cercano a los valores no atípicos.\n\nEl siguiente código carga un vector llamado ingresos. Cada valor representa el ingreso en pesos para un hogar mexicano, de la encuesta de ingreso y gastos de los hogares (ENIGH) del 2022.\n\nload(\"//IMSS-EDS/Users/esteban.degetau/OneDrive - INSTITUTO TECNOLOGICO AUTONOMO DE MEXICO/Documentos/My courses/Statistical tools in R/assignments/data/ingresos.rda\")\n\n\n¿Cuál es la longitud (length) del vector ingresos? (esto nos dirá el número de observaciones en los datos de la ENIGH.) ¿Cuál es la media, la mediana y la desviación estándar de ingresos?\nEscribe una función para truncar un vector. Esta función debe tener dos argumentos: (1) el vector y (2) el percentil al que se truncará el vector por arriba y por abajo. La función deberá hacer lo siguiente:\n\nCalcular los percentiles inferior y superior para truncar los datos.\nCrear un subconjunto del vector original, incluyendo solo las observaciones que se encuentren entre los percentiles inferior y superior.\nRegresar el subconjunto.\n\nPista: La función sort() regresa un vector ordenado de menor a mayor. Para extraer múltiples elementos de un vector, puedes usar la notación vector[1:10] para extraer los elementos 1 al 10.\nEscribe una función para winsorizar un vector. Esta función deberá tener dos argumentos: (1) el vector y (2) el percentil al que se winzorizará el vector por arriba y por abajo. La función deberá hacer lo siguiente:\n\nCalcular los percentiles inferior y superior para winzorizar los datos.\nCrear un nuevo vector, reemplazando cualquier observación que sea menor al percentil inferior por el percentil inferior y cualquier observación que sea mayor al percentil superior por el percentil superior.\nRegresar el vector con los valores atípicos reemplazados.\n\nPista: Puedes usar la notación vector[vector &lt; 10] &lt;- 10 para reemplazar los valores menores a 10 por 10.\nCrea un vector truncado del vector ingresos, que trunque el 1% de los datos por arriba y por abajo. ¿Cuál es la longitud, media, mediana y desviación estándar del vector truncado? Compara el histograma de ingresos con el histograma del vector truncado.\nCrea un vector winzorizado del vector ingresos, que winzorice el 1% de los datos por arriba y por abajo. ¿Cuál es la longitud, media, mediana y desviación estándar del vector winzorizado? Compara el histograma de ingresos con el histograma del vector winzorizado.\nDiscute tus resultados."
  },
  {
    "objectID": "assignments/assignment1/solutions.html#seguridad-social-en-la-población",
    "href": "assignments/assignment1/solutions.html#seguridad-social-en-la-población",
    "title": "Introducción a R",
    "section": "1.2 Seguridad social en la población",
    "text": "1.2 Seguridad social en la población\nEl siguiente código carga un conjunto de datos proveniente de la ENIGH 2022 llamado poblacion2022. Explotaremos este conjunto de datos para explorar qué tipo de personas tienen/carecen de seguridad social en México. Adicionalmente, el código genera un diccionario de datos que queda guardado como una tibble llamado dict. Puedes consultar el diccionario de datos llamando View(dict).\n\n# Checar que pacman esté instalado\nif (!require(\"pacman\")) install.packages(\"pacman\")\n\nLoading required package: pacman\n\npacman::p_load(tidyverse, labelled)\n\nload(\"//IMSS-EDS/Users/esteban.degetau/OneDrive - INSTITUTO TECNOLOGICO AUTONOMO DE MEXICO/Documentos/My courses/Statistical tools in R/assignments/data/poblacion2022.RData\")\n\ndict &lt;- generate_dictionary(poblacion2022)\n\nLa ENIGH es una encuesta representativa a nivel estatal y nacional. La variable factor es un factor de expansión que nos permite hablar de la muestra encuestada como si fuese la población total. Si quisiéramos saber cuántas personas considera la ENIGH que habitan en México, podríamos sumar el factor de expansión de todas las observaciones:\n\npoblacion_total &lt;- sum(poblacion2022$factor)\n\npoblacion_total\n\n[1] 128999038\n\n\n\nLa variable segsoc en poblacion2022 es una variable categórica que indica si una persona tiene o no tiene seguridad social. ¿Cuál es el porcentaje de personas en la población que tienen y no tienen seguridad social?\n¿Qué porcentaje de hombres y mujeres tienen seguridad social? ¿Qué porcentaje de hombres y mujeres no tienen seguridad social?\nAhora queremos saber cuál es la escolaridad promedio para las personas con y sin seguridad social. Sin embargo, la información sobre escolaridad en la tabla poblacion2022 está codificada como factor en la variable nivelaprob. Con la siguiente tabla podemos convertir niveles escolares a años de escolaridad:\n\n\nescolaridad &lt;- tibble(\n  nivelaprob = poblacion2022 |&gt;\n    pull(nivelaprob) |&gt;\n    unique(),\n  escolaridad = c(6, 12, 9, 16, 18, 14, 1, 14, NA, 0, 20)\n)\n\nescolaridad\n\n# A tibble: 11 × 2\n   nivelaprob                  escolaridad\n   &lt;fct&gt;                             &lt;dbl&gt;\n 1 Primaria                              6\n 2 Preparatoria o bachillerato          12\n 3 Secundaria                            9\n 4 Profesional                          16\n 5 Maestría                             18\n 6 Normal                               14\n 7 Preescolar                            1\n 8 Carrera técnica o comercial          14\n 9 &lt;NA&gt;                                 NA\n10 Ninguno                               0\n11 Doctorado                            20\n\n\nUsa la tabla escolaridad para calcular la escolaridad promedio de las personas con y sin seguridad social.\n\nUsa ggplot2 para crear una (o varias) gráfica en donde explores las siguientes preguntas: ¿Cuál es el grado de cobertura de la seguridad social en México, por entidad federativa? ¿Qué entidad federativa tiene la mayor y la menor cobertura de seguridad social? ¿Qué entidades están por arriba y por abajo del promedio nacional de cobertura de seguridad social?\nDiscute tus resultados."
  },
  {
    "objectID": "assignments/assignment1/solutions.html#outliers-datos-atípicos-1",
    "href": "assignments/assignment1/solutions.html#outliers-datos-atípicos-1",
    "title": "Introducción a R",
    "section": "2.1 Outliers: Datos atípicos",
    "text": "2.1 Outliers: Datos atípicos\n\nEstadística descriptiva de ingresos:\n\n\nlength(ingresos)\n\n[1] 397182\n\nmean(ingresos)\n\n[1] 5766.797\n\nmedian(ingresos)\n\n[1] 3236\n\nsd(ingresos)\n\n[1] 19562.4\n\n\n\nUna función para truncar un vector:\n\nmy_truncate &lt;- function(x, per) {\n  ordered &lt;- sort(x)\n  obs &lt;- length(x)\n  left_cut &lt;- obs * per\n  right_cut &lt;- obs * (1 - per)\n  \n  truncated &lt;- ordered[left_cut:right_cut]\n  return(truncated)\n}\n\n\n\n\nUna función para winsorizar un vector:\n\n\nmy_winzorize &lt;- function(x, per) {\n  ordered &lt;- sort(x)\n  obs &lt;- length(x)\n  left_cut &lt;- obs * per\n  right_cut &lt;- obs * (1 - per)\n  \n  lower &lt;- ordered[left_cut]\n  upper &lt;- ordered[right_cut]\n  \n  winzorized &lt;- x\n  winzorized[winzorized &lt; lower] &lt;- lower\n  winzorized[winzorized &gt; upper] &lt;- upper\n  \n  return(winzorized)\n}\n\n\nUn vector truncado del vector ingresos:\n\ntruncated &lt;- my_truncate(ingresos, 0.1)\n\n\n\nhist(ingresos)\nhist(truncated)\n\n\n\n\n\n\n\n\n\n\n\nUn vector winzorizado del vector ingresos:\n\nwinsorized &lt;- my_winzorize(ingresos, 0.1)\n\n\nhist(ingresos)\nhist(winsorized)\n\n\n\n\n\n\n\n\n\n\n\nDiscusión de resultados: La ventaja de truncar los valores es que no impone ningún cambio en la distribución de los datos. La desventaja es que pierde observaciones. Asimismo, la ventaja de winsorizar los datos es que no pierde observaciones. La desventaja es que impone cambios en la distribución de los datos.\n\nAdicionalmente, nota que la mediana es mucho menos sensible a nuestro método de tratamiento de datos atípicos que la media.\n\nmy_results &lt;- data.frame(\n  method = c(\"Original\", \"Truncate\", \"Winzorize\"),\n  length = c(length(ingresos), length(truncated), length(winsorized)),\n  mean = c(mean(ingresos), mean(truncated), mean(winsorized)),\n  median = c(median(ingresos), median(truncated), median(winsorized)),\n  sd = c(sd(ingresos), sd(truncated), sd(winsorized))\n)\n\nmy_results\n\n     method length     mean median        sd\n1  Original 397182 5766.797   3236 19562.404\n2  Truncate 317746 3956.874   3234  3249.921\n3 Winzorize 397182 4410.329   3236  4125.494"
  },
  {
    "objectID": "assignments/assignment1/solutions.html#seguridad-social-en-la-población-1",
    "href": "assignments/assignment1/solutions.html#seguridad-social-en-la-población-1",
    "title": "Introducción a R",
    "section": "2.2 Seguridad social en la población",
    "text": "2.2 Seguridad social en la población\n\nPorcentaje de personas con y sin seguridad social:\n\n\npoblacion2022 |&gt;\n  group_by(segsoc) |&gt;\n  summarise(n = sum(factor)) |&gt;\n  ungroup() |&gt;\n  drop_na() |&gt;\n  mutate(percentage = n / sum(n) * 100)\n\n# A tibble: 2 × 3\n  segsoc        n percentage\n  &lt;fct&gt;     &lt;dbl&gt;      &lt;dbl&gt;\n1 Sí     45525931       43.2\n2 No     59786720       56.8\n\n\n\nPorcentaje de hombres y mujeres con y sin seguridad social:\n\n\npoblacion2022 |&gt;\n  group_by(segsoc, sexo) |&gt;\n  summarise(n = sum(factor)) |&gt;\n  ungroup() |&gt;\n  group_by(sexo) |&gt;\n  drop_na() |&gt;\n  mutate(percentage = n / sum(n) * 100)\n\n`summarise()` has grouped output by 'segsoc'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 4 × 4\n# Groups:   sexo [2]\n  segsoc sexo          n percentage\n  &lt;fct&gt;  &lt;fct&gt;     &lt;dbl&gt;      &lt;dbl&gt;\n1 Sí     Hombre 25177443       50.6\n2 Sí     Mujer  20348488       36.6\n3 No     Hombre 24602951       49.4\n4 No     Mujer  35183769       63.4\n\n\n63 % de las mujeres no tiene seguridad social, mientras que solo 49 % de los hombres no tiene seguridad social.\n\nEscolaridad promedio de las personas con y sin seguridad social:\n\n\npoblacion2022 &lt;- poblacion2022 |&gt;\n  left_join(\n    escolaridad,\n    by = \"nivelaprob\"\n  ) \n\npoblacion2022 |&gt;\n  group_by(segsoc) |&gt;\n  summarise(\n    escolaridad_prom = weighted.mean(escolaridad, factor, na.rm = T)\n  ) |&gt;\n  ungroup() |&gt;\n  drop_na()\n\n# A tibble: 2 × 2\n  segsoc escolaridad_prom\n  &lt;fct&gt;             &lt;dbl&gt;\n1 Sí                11.6 \n2 No                 8.99\n\n\nLas personas con seguridad social tienen en promedio 11.6 años de escolaridad, mientras que las personas sin seguridad social tienen en promedio 8.9 años de escolaridad.\n\nGráfica de la cobertura de la seguridad social por entidad federativa:\n\n\nentidades &lt;- poblacion2022 |&gt;\n  group_by(entidad, segsoc) |&gt;\n  summarise(n = sum(factor)) |&gt;\n  ungroup() |&gt;\n  drop_na() |&gt;\n  group_by(entidad) |&gt;\n  mutate(percentage = n / sum(n)) |&gt;\n  ungroup() |&gt;\n  filter(segsoc == \"Sí\")\n\n`summarise()` has grouped output by 'entidad'. You can override using the\n`.groups` argument.\n\npromedio_nacional &lt;- poblacion2022 |&gt;\n  group_by(segsoc) |&gt;\n  summarise(n = sum(factor)) |&gt;\n  ungroup() |&gt;\n  drop_na() |&gt;\n  mutate(percentage = n / sum(n)) |&gt;\n  filter(segsoc == \"Sí\") |&gt;\n  pull(percentage)\n  \nentidades |&gt;\n  ggplot(aes(x = reorder(entidad, percentage), y = percentage)) +\n  geom_point(aes(size = n)) +\n  geom_hline(aes(yintercept = promedio_nacional, linetype = \"Promedio nacional\")) +\n  coord_flip() +\n  labs(\n    x = \"Entidad federativa\",\n    y = \"Porcentaje de personas con seguridad social\",\n    title = \"Cobertura de la seguridad social por entidad federativa\",\n    linetype = \"\"\n  ) +\n  scale_size_continuous(\n    name = \"Habitantes\",\n    labels = scales::comma\n  ) +\n  scale_y_continuous(labels = scales::percent) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\nLa cobertura de seguridad social es una historia de contrastes. 50% de los hombres tienen cobertura, mientras que solo 37% de las mujeres tienen. La escolaridad promedio de las personas con seguridad social es de 11.6 años, mientras que la escolaridad promedio de las personas sin seguridad social es de 9.9 años. En Coahuila, cerca del 65% de la población tiene seguridad social, mientras que en Chiapas solo el 15%.\n\nHay mucho camino que recorrer para lograr una cobertura universal de la seguridad social en México."
  },
  {
    "objectID": "assignments/assignment0/instructions.html",
    "href": "assignments/assignment0/instructions.html",
    "title": "Instalación del software",
    "section": "",
    "text": "Antes de comenzar el curso, es necesario que instales el software que utilizaremos. Esta tarea no tiene entregable. Solo es necesario que hayas seguido cada uno de los pasos siguientes antes de la primera clase, el miércoles 19 de marzo."
  },
  {
    "objectID": "assignments/assignment0/instructions.html#instala-r",
    "href": "assignments/assignment0/instructions.html#instala-r",
    "title": "Instalación del software",
    "section": "1 Instala R",
    "text": "1 Instala R\nPara instalar R en Windows, sigue las instrucciones en la liga: https://cran.r-project.org/bin/windows/base/.\nPara instalar R en macOS, sigue las instrucciones en la liga: https://cran.r-project.org/bin/macosx/."
  },
  {
    "objectID": "assignments/assignment0/instructions.html#instala-rstudio",
    "href": "assignments/assignment0/instructions.html#instala-rstudio",
    "title": "Instalación del software",
    "section": "2 Instala RStudio",
    "text": "2 Instala RStudio\nRStudio es un entorno de desarrollo integrado (IDE) para R. Puedes descargarlo de la liga: https://www.rstudio.com/products/rstudio/download/. Ojo: si ya instalaste R para este punto, solo necesitas instalar RStudio.\nEste paso en realidad es opcional. Si prefieres trabajar en VSCode o en otro IDE, adelante."
  },
  {
    "objectID": "assignments/assignment0/instructions.html#instala-quarto",
    "href": "assignments/assignment0/instructions.html#instala-quarto",
    "title": "Instalación del software",
    "section": "3 Instala Quarto",
    "text": "3 Instala Quarto\nQuarto es un software que permite crear reportes computacionales con R para exportar en una variedad de formatos. Todas las tareas se entregarán en documentos creados por Quarto. Para instalar Quarto, sigue las instrucciones en la liga: https://quarto.org/docs/getting-started/installation.html."
  },
  {
    "objectID": "assignments/assignment1/instructions.html",
    "href": "assignments/assignment1/instructions.html",
    "title": "Introducción a la ciencia de datos con R",
    "section": "",
    "text": "La Tarea 1 debe entregarse el jueves 27 de marzo. La entrega consiste en un archivo PDF que incluya las respuestas a las preguntas planteadas, así como el código .qmd que generó las respuestas. Para descargar el archivo .qmd, haz clic aquí.\nEscribe todas tus respuestas en la sección de respuestas al final de este archivo.\nEscribe tu nombre en el campo author del YAML."
  },
  {
    "objectID": "assignments/assignment1/instructions.html#outliers-datos-atípicos",
    "href": "assignments/assignment1/instructions.html#outliers-datos-atípicos",
    "title": "Introducción a la ciencia de datos con R",
    "section": "1.1 Outliers: Datos atípicos",
    "text": "1.1 Outliers: Datos atípicos\nUn problema común en el análisis de datos es cómo tratar con datos atípicos: aquellos valores que difieren significativamente del resto de los datos. Dos soluciones estándar son:\n\nTruncar los datos: eliminando los datos atípicos\nWinsorizar los datos: reemplazando los datos atípicos por un valor cercano a los valores no atípicos.\n\nEl siguiente código carga un vector llamado ingresos. Cada valor representa el ingreso en pesos para un hogar mexicano, de la encuesta de ingreso y gastos de los hogares (ENIGH) del 2022.\n\nload(\"//IMSS-EDS/Users/esteban.degetau/OneDrive - INSTITUTO TECNOLOGICO AUTONOMO DE MEXICO/Documentos/My courses/Statistical tools in R/assignments/data/ingresos.rda\")\n\n\n¿Cuál es la lognitud (length) del vector ingresos? (esto nos dirá el número de observaciones en los datos de la ENIGH.) ¿Cuál es la media, la mediana y la desviación estándar de ingresos?\nEscribe una función para truncar un vector. Esta función debe tener dos argumentos: (1) el vector y (2) el percentil al que se truncará el vector por arriba y por abajo. La función deberá hacer lo siguiente:\n\nCalcular los percentiles inferior y superior para truncar los datos.\nCrear un subconjunto del vector original, incluyendo solo las observaciones que se encuentren entre los percentiles inferior y superior.\nRegresar el subconjunto.\n\nPista: La función sort() regresa un vector ordenado de menor a mayor. Para extraer múltiples elementos de un vector, puedes usar la notación vector[1:10] para extraer los elementos 1 al 10.\nEscribe una función para winsorizar un vector. Esta función deberá tener dos argumentos: (1) el vector y (2) el percentil al que se winzorizará el vector por arriba y por abajo. La función deberá hacer lo siguiente:\n\nCalcular los percentiles inferior y superior para winzorizar los datos.\nCrear un nuevo vector, reemplazando cualquier observación que sea menor al percentil inferior por el percentil inferior y cualquier observación que sea mayor al percentil superior por el percentil superior.\nRegresar el vector con los valores atípicos reemplazados.\n\nPista: Puedes usar la notación vector[vector &lt; 10] &lt;- 10 para reemplazar los valores menores a 10 por 10.\nCrea un vector truncado del vector ingresos, que trunque el 1% de los datos por arriba y por abajo. ¿Cuál es la longitud, media, mediana y desviación estándar del vector truncado? Compara el histograma de ingresos con el histograma del vector truncado.\nCrea un vector winzorizado del vector ingresos, que winzorice el 1% de los datos por arriba y por abajo. ¿Cuál es la longitud, media, mediana y desviación estándar del vector winzorizado? Compara el histograma de ingresos con el histograma del vector winzorizado.\nDiscute tus resultados."
  },
  {
    "objectID": "assignments/assignment1/instructions.html#seguridad-social-en-la-población",
    "href": "assignments/assignment1/instructions.html#seguridad-social-en-la-población",
    "title": "Introducción a la ciencia de datos con R",
    "section": "1.2 Seguridad social en la población",
    "text": "1.2 Seguridad social en la población\nEl siguiente código carga un conjunto de datos proveniente de la ENIGH 2022 llamado poblacion2022. Explotaremos este conjunto de datos para explorar qué tipo de personas tienen/carecen de seguridad social en México. Adicoinalmente, el código genera un diccionario de datos que queda guardado como una tibble llamado dict. Puedes consultar el diccionario de datos llamando View(dict).\n\n# Checar que pacman esté instalado\nif (!require(\"pacman\")) install.packages(\"pacman\")\n\nLoading required package: pacman\n\npacman::p_load(tidyverse, labelled)\n\nload(\"//IMSS-EDS/Users/esteban.degetau/OneDrive - INSTITUTO TECNOLOGICO AUTONOMO DE MEXICO/Documentos/My courses/Statistical tools in R/assignments/data/poblacion2022.RData\")\n\ndict &lt;- generate_dictionary(poblacion2022)\n\nLa ENIGH es una encuesta representativa a nivel estatal y nacional. La variable factor es un factor de expansión que nos permite hablar de la muestra encuestada como si fuese la población total. Si quisiéramos saber cuántas personas considera la ENIGH que habitan en México, podríamos sumar el factor de expansión de todas las observaciones:\n\npoblacion_total &lt;- sum(poblacion2022$factor)\n\npoblacion_total\n\n[1] 128999038\n\n\n\nLa variable segsoc en poblacion2022 es una variable categórica que indica si una persona tiene o no tiene seguridad social. ¿Cuál es el porcentaje de personas en la población que tienen y no tienen seguridad social?\n¿Qué porcentaje de hombres y mujeres tienen seguridad social? ¿Qué porcentaje de hombres y mujeres no tienen seguridad social?\nAhora queremos saber cuál es la escolaridad promedio para las personas con y sin seguridad social. Sin embargo, la información sobre escolaridad en la tabla poblacion2022 está codificada como factor en la variable nivelaprob. Con la siguiente tabla podemos covnertir niveles escolares en años de escolaridad:\n\n\nescolaridad &lt;- tibble(\n  nivelaprob = poblacion2022 |&gt;\n    pull(nivelaprob) |&gt;\n    unique(),\n  escolaridad = c(6, 12, 9, 16, 18, 14, 1, 14, NA, 0, 20)\n)\n\nescolaridad\n\n# A tibble: 11 × 2\n   nivelaprob                  escolaridad\n   &lt;fct&gt;                             &lt;dbl&gt;\n 1 Primaria                              6\n 2 Preparatoria o bachillerato          12\n 3 Secundaria                            9\n 4 Profesional                          16\n 5 Maestría                             18\n 6 Normal                               14\n 7 Preescolar                            1\n 8 Carrera técnica o comercial          14\n 9 &lt;NA&gt;                                 NA\n10 Ninguno                               0\n11 Doctorado                            20\n\n\nUsa la tabla escolaridad para calcular la escolaridad promedio de las personas con y sin seguridad social.\n\nUsa ggplot2 para crear una (o varias) gráfica(s) en donde explores las siguientes preguntas: ¿Cuál es el grado de cobertura de la seguridad social en México, por entidad federativa? ¿Qué entidad federativa tiene la mayor y la menor cobertura de seguridad social? ¿Qué entidades están por arriba y por abajo del promedio nacional de cobertura de seguridad social?\nDiscute tus resultados."
  },
  {
    "objectID": "assignments/assignment1/instructions.html#outliers",
    "href": "assignments/assignment1/instructions.html#outliers",
    "title": "Introducción a la ciencia de datos con R",
    "section": "2.1 Outliers",
    "text": "2.1 Outliers\n\nEl vector ingresos tiene una lognitud de:\n\n\nlength(ingresos)\n\n[1] 397182"
  },
  {
    "objectID": "assignments.html",
    "href": "assignments.html",
    "title": "Tareas",
    "section": "",
    "text": "Aquí podrás encontrar las tareas que asignaré a lo largo del curso. Lee las instrucciones de cada tarea cuidadosamente.\nLas tareas se entregarán a través de mi correo electrónico: esteban.degetau@imss.gob.mx."
  },
  {
    "objectID": "assignments.html#tareas",
    "href": "assignments.html#tareas",
    "title": "Tareas",
    "section": "Tareas",
    "text": "Tareas\n\n\n\n\n\n\n\n\n\n\nInstalación del software\n\n\nTarea 0\n\n\n\n14 mar 2025\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIntroducción a la ciencia de datos con R\n\n\nTarea 1\n\n\n\n20 mar 2025\n\n\n\n\n\n\n\n\nNo hay resultados"
  },
  {
    "objectID": "assignments.html#soluciones",
    "href": "assignments.html#soluciones",
    "title": "Tareas",
    "section": "Soluciones",
    "text": "Soluciones\n\n\n\n\n\n\n\n\n\n\nIntroducción a R\n\n\nSolución a la Tarea 1\n\n\n\n\n\n\n\nNo hay resultados"
  },
  {
    "objectID": "lectures/lecture1.html#por-qué-usar-r",
    "href": "lectures/lecture1.html#por-qué-usar-r",
    "title": "R y el Tidyverse",
    "section": "¿Por qué usar R?",
    "text": "¿Por qué usar R?\nEn un nivel, no hay una razón para cambiar de software estadístico si el que usas actualmente funciona para tus necesidades."
  },
  {
    "objectID": "lectures/lecture1.html#por-qué-usar-r-1",
    "href": "lectures/lecture1.html#por-qué-usar-r-1",
    "title": "R y el Tidyverse",
    "section": "¿Por qué usar R?",
    "text": "¿Por qué usar R?\nSin embargo, estas son algunas razones para mudar tus operaciones estadísticas a R:\n\n\n\nCutting-edge applications: La principal ventaja de usar R es que podemos encontrar paquetes estadísticos que facilitan la implementación de los métodos estadísticos más avanzados.\n\n\n\n\n\nReproducibilidad de resultados: No es muy diferente de otros lenguajes de programación estadística como Stata, SAS o Python, pero es na caracterísitica indispensable en la producción de reportes científicos que otras herramientas como Excel no ofrecen."
  },
  {
    "objectID": "lectures/lecture1.html#por-qué-usar-r-2",
    "href": "lectures/lecture1.html#por-qué-usar-r-2",
    "title": "R y el Tidyverse",
    "section": "¿Por qué usar R?",
    "text": "¿Por qué usar R?\n\n\nComunidad y soporte de calidad: Hay una comunidad muy activa de usuarios de R que comparten sus conocimientos y paquetes en línea. Si te topas con un problema, seguramente alguien ya hizo un paquete que lo resuelve.\nSi tienes la intención de invertir el esfuerzo para aprender un software estadístico, la estructura de R y la facilidad para escribir tus propias funciones (y paquetes) son atracciones poderosas.\n\n\n\n\n\nEs gratis: Es un software con una integración formidable, y es completamente tuyo por el precio de una descarga (y la inversión de aprender a sacarle provecho)."
  },
  {
    "objectID": "lectures/lecture1.html#r-es-una-calculadora-glorificada",
    "href": "lectures/lecture1.html#r-es-una-calculadora-glorificada",
    "title": "R y el Tidyverse",
    "section": "R es una calculadora glorificada",
    "text": "R es una calculadora glorificada\n\n\n2 + 2\n\n\n\n[1] 4\n\n\n\n\n\n2 &gt; 2\n\n\n\n[1] FALSE\n\n\n\n\n\n2 == 2\n\n\n\n[1] TRUE\n\n\n\n\n\n2 != 2\n\n\n\n[1] FALSE\n\n\n\n\n\n2 &gt;= 2\n\n\n\n[1] TRUE"
  },
  {
    "objectID": "lectures/lecture1.html#r-permite-declarar-variables-on-the-fly",
    "href": "lectures/lecture1.html#r-permite-declarar-variables-on-the-fly",
    "title": "R y el Tidyverse",
    "section": "R permite declarar variables on the fly\n",
    "text": "R permite declarar variables on the fly\n\n\n\na &lt;- 2\n\nb &lt;- 3\n\nc &lt;- -4\n\nx1 &lt;- (-b + sqrt(b^2 - 4*a*c)) / (2*a)\n\nx2 &lt;- (-b - sqrt(b^2 - 4*a*c)) / (2*a)\n\nx1\n\n\n\n[1] 0.8507811\n\nx2\n\n[1] -2.350781"
  },
  {
    "objectID": "lectures/lecture1.html#vectores-y-operaciones-vectoriales",
    "href": "lectures/lecture1.html#vectores-y-operaciones-vectoriales",
    "title": "R y el Tidyverse",
    "section": "Vectores y operaciones vectoriales",
    "text": "Vectores y operaciones vectoriales\n\n\nd &lt;- c(3, 4, 5) \n\nlength(d)\n\n\n\n[1] 3\n\n\n\n\n\nd[1]\n\n\n\n[1] 3\n\n\n\n\n\nd * 2 \n\n\n\n[1]  6  8 10\n\n\n\n\n\ne &lt;- c(6, 7, 8)\n\nf &lt;- c(d, e)\n\nf\n\n\n\n[1] 3 4 5 6 7 8\n\n\n\n\n\ng &lt;- d + e # Este resultado es importante\n\ng\n\n\n\n[1]  9 11 13\n\n\n\n\nPregunta: ¿Cómo llegamos al resultado en el vector g?"
  },
  {
    "objectID": "lectures/lecture1.html#clases-de-vectores",
    "href": "lectures/lecture1.html#clases-de-vectores",
    "title": "R y el Tidyverse",
    "section": "Clases de vectores",
    "text": "Clases de vectores\n\nh &lt;- c(1, 2, 3)\n\nclass(h)\n\n\n\n[1] \"numeric\"\n\n\n\n\ni &lt;- c(\"a\", \"b\", \"c\")\n\nclass(i)\n\n\n\n[1] \"character\"\n\n\n\n\n\nj &lt;- c(TRUE, FALSE, TRUE)\n\nclass(j)\n\n\n\n[1] \"logical\"\n\n\n\n\n\nk &lt;- c(h, i, j)\n\n\n\n\nPregunta: ¿Qué clase de vector es k?\n\n\n\nk\n\n\n\n[1] \"1\"     \"2\"     \"3\"     \"a\"     \"b\"     \"c\"     \"TRUE\"  \"FALSE\" \"TRUE\" \n\n\n\n\n\nclass(k)\n\n\n\n[1] \"character\""
  },
  {
    "objectID": "lectures/lecture1.html#r-es-muy-amigable-al-usuario",
    "href": "lectures/lecture1.html#r-es-muy-amigable-al-usuario",
    "title": "R y el Tidyverse",
    "section": "R es muy amigable al usuario",
    "text": "R es muy amigable al usuario\n\nR ayuda mucho al usuario. Otros lenguajes pudieron haber arrojado un error a la hora de definir al vector k a partir de vectores de diferentes clases. Sin embargo, R hizo lo siguiente para evitar el error:\n\n\n\nk &lt;- c(as.character(h), as.character(i), as.character(j))\n\nk\n\n\n\n[1] \"1\"     \"2\"     \"3\"     \"a\"     \"b\"     \"c\"     \"TRUE\"  \"FALSE\" \"TRUE\""
  },
  {
    "objectID": "lectures/lecture1.html#funciones",
    "href": "lectures/lecture1.html#funciones",
    "title": "R y el Tidyverse",
    "section": "Funciones",
    "text": "Funciones\nEscribamos una función que calcule el área de un círculo, dado su radio.\n\n\narea_circulo &lt;- function(radio) {\n    res &lt;- pi * radio^2\n\n    return(res)\n}\n\n\narea_circulo(3)\n\n\n\n[1] 28.27433\n\n\n\n\n\nradios &lt;- seq(4, 10, 1)\n\nradios\n\n\n\n[1]  4  5  6  7  8  9 10\n\n\n\n\n\nareas &lt;- area_circulo(radios)\n\nareas\n\n\n\n[1]  50.26548  78.53982 113.09734 153.93804 201.06193 254.46900 314.15927"
  },
  {
    "objectID": "lectures/lecture1.html#funciones-vectorizadas",
    "href": "lectures/lecture1.html#funciones-vectorizadas",
    "title": "R y el Tidyverse",
    "section": "Funciones vectorizadas",
    "text": "Funciones vectorizadas\nOjo: En el ejemplo anterior, R nos volvió a ayudar.\n\nPudo interpretar que la función area_circulo debía aplicarse a cada elemento del vector radios y nos devolvió un vector con las áreas correspondientes.\n\n\nEsto fue posible porque el contenido de la función area_circulo es vectorizado. No siempre será así, pero en esta ocasión, R pudo ayudarnos.\n\n\nOtras veces, tendremos que aplicar una función a cada elemento de un vector con ayuda de funciones como lapply o sapply. También veremos cómo hacer programación funcional con purrr para hacer muchas computaciones de manera más eficiente."
  },
  {
    "objectID": "lectures/lecture1.html#orden-de-operaciones",
    "href": "lectures/lecture1.html#orden-de-operaciones",
    "title": "R y el Tidyverse",
    "section": "Orden de operaciones",
    "text": "Orden de operaciones\nOtra cosa para destacar es que R guarda el orden de operaciones.\n\nLa función area_circulo regresa el resultado para la expresión \\(\\pi r^2\\) y no para \\(\\pi (r^2)\\).\n\n\nNo tuvimos que especificar el orden de operaciones, escribiendo pi * (r^2), R lo hizo por nosotros."
  },
  {
    "objectID": "lectures/lecture1.html#funciones-de-base-r",
    "href": "lectures/lecture1.html#funciones-de-base-r",
    "title": "R y el Tidyverse",
    "section": "Funciones de base R",
    "text": "Funciones de base R\nR tiene funciones estadísticas precargadas.\n\nPor ejemplo, podemos generar números aleatorios a partir de una variedad de distribuciones teóricas.\n\n\n\nrnorm genera números aleatorios de una distribución normal\nrunif a partir de una distribución uniforme\n\n\n\n\n\nrandom_numbers &lt;- rnorm(100000, mean = 0, sd = 1)\n\n\nhist(random_numbers)"
  },
  {
    "objectID": "lectures/lecture1.html#funciones-de-base-r-1",
    "href": "lectures/lecture1.html#funciones-de-base-r-1",
    "title": "R y el Tidyverse",
    "section": "Funciones de base R",
    "text": "Funciones de base R\nTambién podemos calcular la media, la desviación estándar, la longitud y la clase de un vector de números.\n\n\nmean(random_numbers)\n\n\n\n[1] 0.00131715\n\nsd(random_numbers)\n\n[1] 1.002069\n\nlength(random_numbers)\n\n[1] 100000\n\nclass(random_numbers)\n\n[1] \"numeric\"\n\n\n\n\nPuedes consultar la documentación de cualquier función con el comando ? seguido del nombre de la función. Por ejemplo: ?rnorm."
  },
  {
    "objectID": "lectures/lecture1.html#base-r-vs.-tidyverse",
    "href": "lectures/lecture1.html#base-r-vs.-tidyverse",
    "title": "R y el Tidyverse",
    "section": "Base R vs. Tidyverse",
    "text": "Base R vs. Tidyverse\nHasta ahora, solo hemos visto cómo usar R con funciones de base. Sin embargo, la comunidad de R ha desarrollado una serie de paquetes que abren las puertas a nuevos mundos de análisis de datos.\n\nEl Tidyverse es un conjunto de paquetes de R diseñados para la ciencia de datos. Todos los paquetes del Tidyverse comparten una filosofía de diseño, gramática y estructura de datos.\n\n\nEl libro de Wickham, Cetinkaya-Rundel, y Grolemund (2023) es una excelente referencia para aprender ciencia de datos con R."
  },
  {
    "objectID": "lectures/lecture1.html#instalación-de-paquetes",
    "href": "lectures/lecture1.html#instalación-de-paquetes",
    "title": "R y el Tidyverse",
    "section": "Instalación de paquetes",
    "text": "Instalación de paquetes\nHay dos formas de instalar paquetes en R:\n\nUsando el comando base install.packages(), lo que además requiere cargar el paquete en la sesión cada vez que se inicia R.\n\n\n# install.packages(\"tidyverse\")\n\nlibrary(tidyverse)\n\n\n\n\n\nO, alternativamente, usando el paquete pacman. Solo necesitamos instalarlo una vez.\n\n\n# install.packages(\"pacman\")\n\npacman::p_load(tidyverse)\n\n\n\n\n\nTambién podemos llamar paquetes instalados, pero que no están cargados en la sesión, escribiendo el nombre del paquete, seguido de :: y el nombre de la función, como cuando llamamos a la función p_load del paquete pacman, sin cargar el paquete en la sesión."
  },
  {
    "objectID": "lectures/lecture1.html#paquetes-del-tidyverse-1",
    "href": "lectures/lecture1.html#paquetes-del-tidyverse-1",
    "title": "R y el Tidyverse",
    "section": "Paquetes del Tidyverse",
    "text": "Paquetes del Tidyverse\nAl instalar el Tidyverse, instalamos un conjunto de paquetes que podemos examinar llamando:\n\ntidyverse_packages()\n\n\n\n [1] \"broom\"         \"conflicted\"    \"cli\"           \"dbplyr\"       \n [5] \"dplyr\"         \"dtplyr\"        \"forcats\"       \"ggplot2\"      \n [9] \"googledrive\"   \"googlesheets4\" \"haven\"         \"hms\"          \n[13] \"httr\"          \"jsonlite\"      \"lubridate\"     \"magrittr\"     \n[17] \"modelr\"        \"pillar\"        \"purrr\"         \"ragg\"         \n[21] \"readr\"         \"readxl\"        \"reprex\"        \"rlang\"        \n[25] \"rstudioapi\"    \"rvest\"         \"stringr\"       \"tibble\"       \n[29] \"tidyr\"         \"xml2\"          \"tidyverse\""
  },
  {
    "objectID": "lectures/lecture1.html#estructura-de-los-datos",
    "href": "lectures/lecture1.html#estructura-de-los-datos",
    "title": "R y el Tidyverse",
    "section": "Estructura de los datos",
    "text": "Estructura de los datos\nUna de las convenciones más importantes del Tidyverse es el uso de tablas en formato tibble para alojar datos, que siempre guardan la misma estructura:\n\nlas columnas son variables\nlas filas son observaciones\nlas celdas son valores\n\nUna tabla tibble representa una o varias métricas de una o varias observaciones."
  },
  {
    "objectID": "lectures/lecture1.html#estructura-de-los-datos-1",
    "href": "lectures/lecture1.html#estructura-de-los-datos-1",
    "title": "R y el Tidyverse",
    "section": "Estructura de los datos",
    "text": "Estructura de los datos\n\nTres reglas de tablas limpias. Fuente: Wickham, Cetinkaya-Rundel, y Grolemund (2023)"
  },
  {
    "objectID": "lectures/lecture1.html#escribir-tablas-con-tibble",
    "href": "lectures/lecture1.html#escribir-tablas-con-tibble",
    "title": "R y el Tidyverse",
    "section": "Escribir tablas con tibble\n",
    "text": "Escribir tablas con tibble\n\nPodemos escribir una tabla tibble de la siguiente manera:\n\ntabla_1 &lt;- tibble(\n    nombre = c(\"Juan\", \"María\", \"Pedro\"),\n    anio_nacim = c(1990, 1985, 1992),\n    sexo = c(\"M\", \"F\", \"M\")\n)\n\ntabla_1\n\n\n\n# A tibble: 3 × 3\n  nombre anio_nacim sexo \n  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n1 Juan         1990 M    \n2 María        1985 F    \n3 Pedro        1992 M    \n\nglimpse(tabla_1)\n\nRows: 3\nColumns: 3\n$ nombre     &lt;chr&gt; \"Juan\", \"María\", \"Pedro\"\n$ anio_nacim &lt;dbl&gt; 1990, 1985, 1992\n$ sexo       &lt;chr&gt; \"M\", \"F\", \"M\""
  },
  {
    "objectID": "lectures/lecture1.html#las-tablas-son-un-arreglo-de-vectores",
    "href": "lectures/lecture1.html#las-tablas-son-un-arreglo-de-vectores",
    "title": "R y el Tidyverse",
    "section": "Las tablas son un arreglo de vectores",
    "text": "Las tablas son un arreglo de vectores\nLas tablas tibble son arreglos de vectores, donde cada columna es un vector.\nPodemos accederlas de dos maneras:\n\nUsando base R:\n\n\n\nnombres_1 &lt;- tabla_1$nombre\n\n\n\n\n\nUsando la función pull() de dplyr:\n\n\n\n\nnombres_2 &lt;- pull(tabla_1, nombre)\n\n\n\n\n\n\nPodemos verificar que ambos vectores son iguales:\n\nnombres_1 == nombres_2\n\n\n\n[1] TRUE TRUE TRUE\n\n\n\n\nO, de manera más eficiente:\n\nall(nombres_1 == nombres_2)\n\n\n\n[1] TRUE"
  },
  {
    "objectID": "lectures/lecture1.html#nyflights13",
    "href": "lectures/lecture1.html#nyflights13",
    "title": "R y el Tidyverse",
    "section": "nyflights13",
    "text": "nyflights13\nYa conocemos la estructura de trabajo con tablas tibble.\nAhora, vamos a trabajar con un conjunto de datos del mundo real.\nnycflights13 es un paquete de datos que contiene información sobre todos los vuelos que salieron de los aeropuertos de Nueva York en 2013.\nLos datos provienen del Bureau of Transportation Statistics de los Estados Unidos y podemos ir a la documentación con ?flights.\nCargamos el paquete con pacman:\n\npacman::p_load(nycflights13)"
  },
  {
    "objectID": "lectures/lecture1.html#nyflights13-1",
    "href": "lectures/lecture1.html#nyflights13-1",
    "title": "R y el Tidyverse",
    "section": "nyflights13",
    "text": "nyflights13\n\nflights\n\n\n\n# A tibble: 336,776 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 336,766 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "lectures/lecture1.html#nyflights13-2",
    "href": "lectures/lecture1.html#nyflights13-2",
    "title": "R y el Tidyverse",
    "section": "nyflights13",
    "text": "nyflights13\n\nglimpse(flights)\n\n\n\nRows: 336,776\nColumns: 19\n$ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…\n$ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, …\n$ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 600, …\n$ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2, -1…\n$ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 849,…\n$ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 851,…\n$ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7, -1…\n$ carrier        &lt;chr&gt; \"UA\", \"UA\", \"AA\", \"B6\", \"DL\", \"UA\", \"B6\", \"EV\", \"B6\", \"…\n$ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 4…\n$ tailnum        &lt;chr&gt; \"N14228\", \"N24211\", \"N619AA\", \"N804JB\", \"N668DN\", \"N394…\n$ origin         &lt;chr&gt; \"EWR\", \"LGA\", \"JFK\", \"JFK\", \"LGA\", \"EWR\", \"EWR\", \"LGA\",…\n$ dest           &lt;chr&gt; \"IAH\", \"IAH\", \"MIA\", \"BQN\", \"ATL\", \"ORD\", \"FLL\", \"IAD\",…\n$ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 1…\n$ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, …\n$ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6…\n$ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59, 0…\n$ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 0…\n\n\n\nPregunta: ¿Cuál es el nivel de observación de los datos?\n\n\nTambién puedes usar View(flights) para ver los datos en una ventana de visualización."
  },
  {
    "objectID": "lectures/lecture1.html#verbos-de-dplyr",
    "href": "lectures/lecture1.html#verbos-de-dplyr",
    "title": "R y el Tidyverse",
    "section": "Verbos de dplyr\n",
    "text": "Verbos de dplyr\n\nVamos a aprender los verbos (funciones) principales de dplyr, con los que podemos resolver una vasta cantidad de problemas de manipulación de datos.\n¿Qué tienen en común los verbos de dplyr?\n\nSu primer argumento es una tibble.\nLos siguientes argumentos típicamente describen qué columnas operar usando los nombres de las variables sin comillas.\nSiempre devuelven una tibble."
  },
  {
    "objectID": "lectures/lecture1.html#anidación-de-funciones-con-el-pipe",
    "href": "lectures/lecture1.html#anidación-de-funciones-con-el-pipe",
    "title": "R y el Tidyverse",
    "section": "Anidación de funciones con el pipe |>\n",
    "text": "Anidación de funciones con el pipe |&gt;\n\nMuy frcuentemente, vas a querer realizar varias operaciones en una tabla de datos.\nEn lugar de guardar el resultado de cada operación en un objeto, puedes anidar las funciones con el operador |&gt;."
  },
  {
    "objectID": "lectures/lecture1.html#anidación-de-funciones-con-el-pipe-1",
    "href": "lectures/lecture1.html#anidación-de-funciones-con-el-pipe-1",
    "title": "R y el Tidyverse",
    "section": "Anidación de funciones con el pipe |>\n",
    "text": "Anidación de funciones con el pipe |&gt;\n\n\nEjemplo 1 Imagina que queremos encontrar el vuelo más rápido al aeropueto de Houston IAH.\nNecesitarás combinar las funciones filter(), mutate(), select() y arrange().\n\n\n\nSolución 1. \n\nflights |&gt;\n    filter(dest == \"IAH\") |&gt;\n    mutate(speed = distance / air_time * 60) |&gt; \n    select(year:day, dep_time, carrier, flight, speed) |&gt;\n    arrange(desc(speed))\n\n\n\n# A tibble: 7,198 × 7\n    year month   day dep_time carrier flight speed\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt; &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;\n 1  2013     7     9      707 UA         226  522.\n 2  2013     8    27     1850 UA        1128  521.\n 3  2013     8    28      902 UA        1711  519.\n 4  2013     8    28     2122 UA        1022  519.\n 5  2013     6    11     1628 UA        1178  515.\n 6  2013     8    27     1017 UA         333  515.\n 7  2013     8    27     1205 UA        1421  515.\n 8  2013     8    27     1758 UA         302  515.\n 9  2013     9    27      521 UA         252  515.\n10  2013     8    28      625 UA         559  515.\n# ℹ 7,188 more rows"
  },
  {
    "objectID": "lectures/lecture1.html#anidación-de-funciones-con-el-pipe-2",
    "href": "lectures/lecture1.html#anidación-de-funciones-con-el-pipe-2",
    "title": "R y el Tidyverse",
    "section": "Anidación de funciones con el pipe |>\n",
    "text": "Anidación de funciones con el pipe |&gt;\n\n¿Qué pasaría si no usamos el operador |&gt;?\nUna opción es anidar las funciones con paréntesis:\n\nSolución 2. \n\n\narrange(\n  select(\n    mutate(\n      filter(\n        flights, \n        dest == \"IAH\"\n      ),\n      speed = distance / air_time * 60\n    ),\n    year:day, dep_time, carrier, flight, speed\n  ),\n  desc(speed)\n)\n\n\n# A tibble: 7,198 × 7\n    year month   day dep_time carrier flight speed\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt; &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;\n 1  2013     7     9      707 UA         226  522.\n 2  2013     8    27     1850 UA        1128  521.\n 3  2013     8    28      902 UA        1711  519.\n 4  2013     8    28     2122 UA        1022  519.\n 5  2013     6    11     1628 UA        1178  515.\n 6  2013     8    27     1017 UA         333  515.\n 7  2013     8    27     1205 UA        1421  515.\n 8  2013     8    27     1758 UA         302  515.\n 9  2013     9    27      521 UA         252  515.\n10  2013     8    28      625 UA         559  515.\n# ℹ 7,188 more rows"
  },
  {
    "objectID": "lectures/lecture1.html#anidar-funciones-con-el-pipe",
    "href": "lectures/lecture1.html#anidar-funciones-con-el-pipe",
    "title": "R y el Tidyverse",
    "section": "Anidar funciones con el pipe |>\n",
    "text": "Anidar funciones con el pipe |&gt;\n\nOtra opción es guardar los pasos intermedios en objetos:\n\nSolución 3. \n\nflights1 &lt;- filter(flights, dest == \"IAH\")\nflights2 &lt;- mutate(flights1, speed = distance / air_time * 60)\nflights3 &lt;- select(flights2, year:day, dep_time, carrier, flight, speed)\narrange(flights3, desc(speed))\n\n\n\n# A tibble: 7,198 × 7\n    year month   day dep_time carrier flight speed\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt; &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;\n 1  2013     7     9      707 UA         226  522.\n 2  2013     8    27     1850 UA        1128  521.\n 3  2013     8    28      902 UA        1711  519.\n 4  2013     8    28     2122 UA        1022  519.\n 5  2013     6    11     1628 UA        1178  515.\n 6  2013     8    27     1017 UA         333  515.\n 7  2013     8    27     1205 UA        1421  515.\n 8  2013     8    27     1758 UA         302  515.\n 9  2013     9    27      521 UA         252  515.\n10  2013     8    28      625 UA         559  515.\n# ℹ 7,188 more rows"
  },
  {
    "objectID": "lectures/lecture1.html#anidación-de-funciones-con-el-pipe-3",
    "href": "lectures/lecture1.html#anidación-de-funciones-con-el-pipe-3",
    "title": "R y el Tidyverse",
    "section": "Anidación de funciones con el pipe |>\n",
    "text": "Anidación de funciones con el pipe |&gt;\n\n¿Cuál de las tres soluciones deja un código más limpio y fácil de leer?"
  },
  {
    "objectID": "lectures/lecture1.html#grupos-y-agregaciones",
    "href": "lectures/lecture1.html#grupos-y-agregaciones",
    "title": "R y el Tidyverse",
    "section": "Grupos y agregaciones",
    "text": "Grupos y agregaciones\nHasta ahora, hemos visto verbos que trabajan con filas y columnas. Ahora veremos que dplyr se vuelve más poderoso cuando agregamos la posibilidad de trabajar con grupos.\nLas funciones que discutiremos son group_by() y summarize()."
  },
  {
    "objectID": "lectures/lecture1.html#group_by",
    "href": "lectures/lecture1.html#group_by",
    "title": "R y el Tidyverse",
    "section": "group_by()",
    "text": "group_by()\nUsamos group_by() para dividir el conjunto de datos en grupos con un significado.\n\n\nflights |&gt; \n  group_by(month)\n\n\n\n# A tibble: 336,776 × 19\n# Groups:   month [12]\n    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;\n 1  2013     1     1      517            515         2      830            819\n 2  2013     1     1      533            529         4      850            830\n 3  2013     1     1      542            540         2      923            850\n 4  2013     1     1      544            545        -1     1004           1022\n 5  2013     1     1      554            600        -6      812            837\n 6  2013     1     1      554            558        -4      740            728\n 7  2013     1     1      555            600        -5      913            854\n 8  2013     1     1      557            600        -3      709            723\n 9  2013     1     1      557            600        -3      838            846\n10  2013     1     1      558            600        -2      753            745\n# ℹ 336,766 more rows\n# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;\n\n\n\n\ngroup_by()no cambia los datos, pero si te fijas bien, verás que el resultado indica que está “agrupado por” la variable month. Esto significa que las operaciones subsesuentes se aplicarán a cada grupo."
  },
  {
    "objectID": "lectures/lecture1.html#summarize",
    "href": "lectures/lecture1.html#summarize",
    "title": "R y el Tidyverse",
    "section": "summarize()",
    "text": "summarize()\nUsamos summarize()1 para resumir los datos en cada grupo: obtendremos una nueva tabla con una observación por cada grupo.\n\n\n\nflights |&gt; \n  group_by(month) |&gt; \n  summarize(\n    avg_delay = mean(dep_delay, na.rm = TRUE),\n    n = n()\n  )\n\n\n# A tibble: 12 × 3\n   month avg_delay     n\n   &lt;int&gt;     &lt;dbl&gt; &lt;int&gt;\n 1     1     10.0  27004\n 2     2     10.8  24951\n 3     3     13.2  28834\n 4     4     13.9  28330\n 5     5     13.0  28796\n 6     6     20.8  28243\n 7     7     21.7  29425\n 8     8     12.6  29327\n 9     9      6.72 27574\n10    10      6.24 28889\n11    11      5.44 27268\n12    12     16.6  28135\n\n\n\nalternativamente summarise()"
  },
  {
    "objectID": "lectures/lecture1.html#las-funciones-slice_",
    "href": "lectures/lecture1.html#las-funciones-slice_",
    "title": "R y el Tidyverse",
    "section": "Las funciones slice_\n",
    "text": "Las funciones slice_\n\nConsidera la siguiente operación:\n\nflights |&gt; \n  group_by(dest) |&gt; \n  slice_max(arr_delay, n = 1) |&gt;\n  relocate(dest, arr_delay)\n\n\n\n# A tibble: 108 × 19\n# Groups:   dest [105]\n   dest  arr_delay  year month   day dep_time sched_dep_time dep_delay arr_time\n   &lt;chr&gt;     &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n 1 ABQ         153  2013     7    22     2145           2007        98      132\n 2 ACK         221  2013     7    23     1139            800       219     1250\n 3 ALB         328  2013     1    25      123           2000       323      229\n 4 ANC          39  2013     8    17     1740           1625        75     2042\n 5 ATL         895  2013     7    22     2257            759       898      121\n 6 AUS         349  2013     7    10     2056           1505       351     2347\n 7 AVL         228  2013     8    13     1156            832       204     1417\n 8 BDL         266  2013     2    21     1728           1316       252     1839\n 9 BGR         238  2013    12     1     1504           1056       248     1628\n10 BHM         291  2013     4    10       25           1900       325      136\n# ℹ 98 more rows\n# ℹ 10 more variables: sched_arr_time &lt;int&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,\n#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;\n\n\n\n¿Qué hace la función slice_max()?"
  },
  {
    "objectID": "lectures/lecture1.html#aplicación-de-funciones-a-varias-columnas",
    "href": "lectures/lecture1.html#aplicación-de-funciones-a-varias-columnas",
    "title": "R y el Tidyverse",
    "section": "Aplicación de funciones a varias columnas",
    "text": "Aplicación de funciones a varias columnas\n\nEjemplo 2 ¿Cuál es el promedio de cada una de las variables numéricas en la tabla flights?\n\n\nCon las herramientas que hemoos visto hasta ahora, tendríamos que escribir una línea de código para cada variable numérica. Algo como esto:\n\nday_avg &lt;- mean(flights$day, na.rm = TRUE)\nmonth_avg &lt;- mean(flights$month, na.rm = TRUE)\n# etc."
  },
  {
    "objectID": "lectures/lecture1.html#aplicación-de-funciones-a-varias-columnas-1",
    "href": "lectures/lecture1.html#aplicación-de-funciones-a-varias-columnas-1",
    "title": "R y el Tidyverse",
    "section": "Aplicación de funciones a varias columnas",
    "text": "Aplicación de funciones a varias columnas\n\nnumeric_cols &lt;- flights |&gt;\n    select(where(is.numeric)) |&gt;\n    ncol()\n\n\n\n\n\nTenemos 14 columnas numéricas en la tabla flights. No sería imposible escribir una línea de código para cada una, pero sería tedioso y propenso a errores.\n\n\nAdemás, hay conjuntos de datos con muchas más columnas que flights, en las que escribir una línea de código para cada variable numérica sería demasiado costoso."
  },
  {
    "objectID": "lectures/lecture1.html#across",
    "href": "lectures/lecture1.html#across",
    "title": "R y el Tidyverse",
    "section": "across()",
    "text": "across()\nAcross permite aplicar una función a varias columnas de una tabla de datos, sea dentro de summarize() o de mutate().\n\nPara resolver el Ejemplo 2, haríamos lo siguiente:\n\n\n\nSolución 4 (across). \n\nflights |&gt;\n    summarise(\n        across(\n            .cols = where(is.numeric),\n            .fns =  ~ mean(.x, na.rm = TRUE)\n        )   \n    )\n\n\n\n# A tibble: 1 × 14\n   year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;          &lt;dbl&gt;\n1  2013  6.55  15.7    1349.          1344.      12.6    1502.          1536.\n# ℹ 6 more variables: arr_delay &lt;dbl&gt;, flight &lt;dbl&gt;, air_time &lt;dbl&gt;,\n#   distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;"
  },
  {
    "objectID": "lectures/lecture1.html#usando-pivot_longer",
    "href": "lectures/lecture1.html#usando-pivot_longer",
    "title": "R y el Tidyverse",
    "section": "Usando pivot_longer()\n",
    "text": "Usando pivot_longer()\n\nOtra solución es usar la función pivot_longer() para convertir las columnas en filas, y despues calcular el promedio agrupando por variable.\n\n\nSolución 5 (pivot_longer). \n\nflights_long &lt;- flights |&gt;\n    pivot_longer(\n        cols = where(is.numeric),\n        names_to = \"variable\",\n        values_to = \"value\"\n    )\n\nflights_long\n\n\n\n# A tibble: 4,714,864 × 7\n   carrier tailnum origin dest  time_hour           variable       value\n   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt; &lt;dttm&gt;              &lt;chr&gt;          &lt;dbl&gt;\n 1 UA      N14228  EWR    IAH   2013-01-01 05:00:00 year            2013\n 2 UA      N14228  EWR    IAH   2013-01-01 05:00:00 month              1\n 3 UA      N14228  EWR    IAH   2013-01-01 05:00:00 day                1\n 4 UA      N14228  EWR    IAH   2013-01-01 05:00:00 dep_time         517\n 5 UA      N14228  EWR    IAH   2013-01-01 05:00:00 sched_dep_time   515\n 6 UA      N14228  EWR    IAH   2013-01-01 05:00:00 dep_delay          2\n 7 UA      N14228  EWR    IAH   2013-01-01 05:00:00 arr_time         830\n 8 UA      N14228  EWR    IAH   2013-01-01 05:00:00 sched_arr_time   819\n 9 UA      N14228  EWR    IAH   2013-01-01 05:00:00 arr_delay         11\n10 UA      N14228  EWR    IAH   2013-01-01 05:00:00 flight          1545\n# ℹ 4,714,854 more rows\n\n\n\nflights_long |&gt;\n    group_by(variable) |&gt;\n    summarise(\n        avg = mean(value, na.rm = TRUE)\n    )\n\n\n\n# A tibble: 14 × 2\n   variable           avg\n   &lt;chr&gt;            &lt;dbl&gt;\n 1 air_time        151.  \n 2 arr_delay         6.90\n 3 arr_time       1502.  \n 4 day              15.7 \n 5 dep_delay        12.6 \n 6 dep_time       1349.  \n 7 distance       1040.  \n 8 flight         1972.  \n 9 hour             13.2 \n10 minute           26.2 \n11 month             6.55\n12 sched_arr_time 1536.  \n13 sched_dep_time 1344.  \n14 year           2013"
  },
  {
    "objectID": "lectures/lecture1.html#joins",
    "href": "lectures/lecture1.html#joins",
    "title": "R y el Tidyverse",
    "section": "Joins",
    "text": "Joins\nLes recomiendo leer el capítulo 19 de R for Data Science para entender a profundidad las operaciones de joins (Wickham, Cetinkaya-Rundel, y Grolemund 2023)."
  },
  {
    "objectID": "lectures/lecture1.html#left_join",
    "href": "lectures/lecture1.html#left_join",
    "title": "R y el Tidyverse",
    "section": "left_join()",
    "text": "left_join()\nHaremos un ejemplo muy sencillo de un left_join().\n\nRecordemos cómo se ve la tabla flights:\n\nglimpse(flights)\n\n\n\nRows: 336,776\nColumns: 19\n$ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…\n$ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, …\n$ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 600, …\n$ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2, -1…\n$ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 849,…\n$ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 851,…\n$ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7, -1…\n$ carrier        &lt;chr&gt; \"UA\", \"UA\", \"AA\", \"B6\", \"DL\", \"UA\", \"B6\", \"EV\", \"B6\", \"…\n$ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 4…\n$ tailnum        &lt;chr&gt; \"N14228\", \"N24211\", \"N619AA\", \"N804JB\", \"N668DN\", \"N394…\n$ origin         &lt;chr&gt; \"EWR\", \"LGA\", \"JFK\", \"JFK\", \"LGA\", \"EWR\", \"EWR\", \"LGA\",…\n$ dest           &lt;chr&gt; \"IAH\", \"IAH\", \"MIA\", \"BQN\", \"ATL\", \"ORD\", \"FLL\", \"IAD\",…\n$ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 1…\n$ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, …\n$ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6…\n$ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59, 0…\n$ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 0…"
  },
  {
    "objectID": "lectures/lecture1.html#left_join-1",
    "href": "lectures/lecture1.html#left_join-1",
    "title": "R y el Tidyverse",
    "section": "left_join()",
    "text": "left_join()\nLa columna carrier incluye el código de la aerolínea a la que el vuelo pertenece.\nPero no queda exactamente claro qué aerolínea es."
  },
  {
    "objectID": "lectures/lecture1.html#left_join-2",
    "href": "lectures/lecture1.html#left_join-2",
    "title": "R y el Tidyverse",
    "section": "left_join()",
    "text": "left_join()\nAl consultar la documentación usando ?flights, encontramos que la tabla airlines contiene el nombre de las aerolíneas.\n\n\nairlines\n\n\n# A tibble: 16 × 2\n   carrier name                       \n   &lt;chr&gt;   &lt;chr&gt;                      \n 1 9E      Endeavor Air Inc.          \n 2 AA      American Airlines Inc.     \n 3 AS      Alaska Airlines Inc.       \n 4 B6      JetBlue Airways            \n 5 DL      Delta Air Lines Inc.       \n 6 EV      ExpressJet Airlines Inc.   \n 7 F9      Frontier Airlines Inc.     \n 8 FL      AirTran Airways Corporation\n 9 HA      Hawaiian Airlines Inc.     \n10 MQ      Envoy Air                  \n11 OO      SkyWest Airlines Inc.      \n12 UA      United Air Lines Inc.      \n13 US      US Airways Inc.            \n14 VX      Virgin America             \n15 WN      Southwest Airlines Co.     \n16 YV      Mesa Airlines Inc."
  },
  {
    "objectID": "lectures/lecture1.html#left_join-3",
    "href": "lectures/lecture1.html#left_join-3",
    "title": "R y el Tidyverse",
    "section": "left_join()",
    "text": "left_join()\nPuedo agregar esta información a la tabla flights con un left_join().\n\nflights_with_airlines &lt;- left_join(\n    x = flights,\n    y = airlines,\n    by = \"carrier\"\n)\n\nglimpse(flights_with_airlines)\n\n\n\nRows: 336,776\nColumns: 20\n$ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…\n$ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…\n$ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, …\n$ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 600, …\n$ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2, -1…\n$ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 849,…\n$ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 851,…\n$ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7, -1…\n$ carrier        &lt;chr&gt; \"UA\", \"UA\", \"AA\", \"B6\", \"DL\", \"UA\", \"B6\", \"EV\", \"B6\", \"…\n$ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 4…\n$ tailnum        &lt;chr&gt; \"N14228\", \"N24211\", \"N619AA\", \"N804JB\", \"N668DN\", \"N394…\n$ origin         &lt;chr&gt; \"EWR\", \"LGA\", \"JFK\", \"JFK\", \"LGA\", \"EWR\", \"EWR\", \"LGA\",…\n$ dest           &lt;chr&gt; \"IAH\", \"IAH\", \"MIA\", \"BQN\", \"ATL\", \"ORD\", \"FLL\", \"IAD\",…\n$ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 1…\n$ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, …\n$ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6…\n$ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59, 0…\n$ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 0…\n$ name           &lt;chr&gt; \"United Air Lines Inc.\", \"United Air Lines Inc.\", \"Amer…"
  },
  {
    "objectID": "lectures/lecture1.html#left_join-4",
    "href": "lectures/lecture1.html#left_join-4",
    "title": "R y el Tidyverse",
    "section": "left_join()",
    "text": "left_join()\nleft_join() preserva todas las observaciones de la tabla x y agrega las columnas de la tabla y que coinciden con la columna by.\n\nOtras opciones son right_join(), inner_join() y full_join()."
  },
  {
    "objectID": "lectures/lecture1.html#una-variable",
    "href": "lectures/lecture1.html#una-variable",
    "title": "R y el Tidyverse",
    "section": "Una variable",
    "text": "Una variable\nYa vimos cómo hacer un histograma con la función base hist().\nAhora, vamos a ver cómo hacer un histograma con ggplot2.\n\nEjemplo 3 ¿Cómo se distribuyen los retrasos en la llegada de los vuelos en el conjunto de datos flights?"
  },
  {
    "objectID": "lectures/lecture1.html#una-variable-histograma",
    "href": "lectures/lecture1.html#una-variable-histograma",
    "title": "R y el Tidyverse",
    "section": "Una variable: histograma",
    "text": "Una variable: histograma\n\n\n\nggplot(\n    data = flights,\n    mapping = aes(x = arr_delay)\n) +\n    geom_histogram()\n\n\n\n\n\n\nggplot(data = flights) +\n    geom_histogram(\n        mapping = aes(x = arr_delay)\n    )"
  },
  {
    "objectID": "lectures/lecture1.html#una-variable-después-de-producción",
    "href": "lectures/lecture1.html#una-variable-después-de-producción",
    "title": "R y el Tidyverse",
    "section": "Una variable: después de producción",
    "text": "Una variable: después de producción\nLa ventaja de usar ggplot2 es que podemos personalizar las gráficas de manera sencilla.\n\n\nggplot(\n    data = flights,\n    mapping = aes(x = arr_delay)\n    ) +\n    geom_histogram(binwidth = 10, fill = \"lightblue\", color = \"black\") +\n    labs(\n        title = \"Retrasos en la llegada de vuelos\",\n        x = \"Retraso en la llegada (minutos)\",\n        y = \"Frecuencia\"\n    ) +\n    scale_y_continuous(labels = scales::comma) +\n    scale_x_continuous(labels = scales::comma, breaks = seq(-250, 1500, 250)) +\n    theme_minimal()"
  },
  {
    "objectID": "lectures/lecture1.html#una-variable-otras-opciones",
    "href": "lectures/lecture1.html#una-variable-otras-opciones",
    "title": "R y el Tidyverse",
    "section": "Una variable: otras opciones",
    "text": "Una variable: otras opciones\nplot_grid &lt;- ggplot(\n    data = flights,\n    mapping = aes(x = arr_delay)\n) \n\n\nplot_grid +\n    geom_area(stat = \"bin\")\n\n\n\nplot_grid +\n    geom_boxplot()\nplot_grid +\n    geom_density()\nplot_grid +\n    stat_ecdf()"
  },
  {
    "objectID": "lectures/lecture1.html#una-variable-tráfico-de-vuelos",
    "href": "lectures/lecture1.html#una-variable-tráfico-de-vuelos",
    "title": "R y el Tidyverse",
    "section": "Una variable: tráfico de vuelos",
    "text": "Una variable: tráfico de vuelos\n\nEjemplo 4 ¿Cómo se distribuye el tráfico de vuelos a lo largo del día?"
  },
  {
    "objectID": "lectures/lecture1.html#una-variable-tráfico-de-vuelos-1",
    "href": "lectures/lecture1.html#una-variable-tráfico-de-vuelos-1",
    "title": "R y el Tidyverse",
    "section": "Una variable: tráfico de vuelos",
    "text": "Una variable: tráfico de vuelos\n\nSolución 6. \n\nflights |&gt;\n    ggplot(aes(x = hour)) +\n    geom_histogram(binwidth = 1, fill = \"lightblue\", color = \"black\") +\n    labs(\n        title = \"Tráfico de vuelos a lo largo del día\",\n        x = \"Hora del día\",\n        y = \"Frecuencia\"\n    ) +\n    theme_minimal() +\n    scale_x_continuous(breaks = seq(0, 24, 1)) +\n    scale_y_continuous(labels = scales::comma)"
  },
  {
    "objectID": "lectures/lecture1.html#dos-variables",
    "href": "lectures/lecture1.html#dos-variables",
    "title": "R y el Tidyverse",
    "section": "Dos variables",
    "text": "Dos variables\n\nEjemplo 5 ¿Cómo se comporta el retraso de llegadas por hora de llegada?"
  },
  {
    "objectID": "lectures/lecture1.html#dos-variables-1",
    "href": "lectures/lecture1.html#dos-variables-1",
    "title": "R y el Tidyverse",
    "section": "Dos variables",
    "text": "Dos variables\n\nSolución 7. Podemos agrupar los datos por hora y calcular el retraso promedio de llegada usando verbos de dplyr:\n\ndelays &lt;- flights |&gt;\n    group_by(hour) |&gt;\n    summarize(\n        avg_delay = mean(arr_delay, na.rm = TRUE),\n        n = n()\n    ) |&gt;\n    ungroup()\n\ndelays |&gt;\n    ggplot(\n        aes(\n            x = hour,\n            y = avg_delay\n        )\n    ) +\n    geom_point()"
  },
  {
    "objectID": "lectures/lecture1.html#dos-variables-2",
    "href": "lectures/lecture1.html#dos-variables-2",
    "title": "R y el Tidyverse",
    "section": "Dos variables",
    "text": "Dos variables\n\nSolución 8. O podemos usar stat_summary() para calcular el promedio de los retrasos de llegada por hora:\n\ndelays_plot &lt;- flights |&gt;\n    ggplot(\n        aes(\n            x = hour,\n            y = arr_delay\n        )\n    ) +\n    stat_summary(\n        fun = mean,\n        geom = \"point\"\n    ) \n\ndelays_plot"
  },
  {
    "objectID": "lectures/lecture1.html#geom_-vs.-stat_",
    "href": "lectures/lecture1.html#geom_-vs.-stat_",
    "title": "R y el Tidyverse",
    "section": "\ngeom_ vs. stat_\n",
    "text": "geom_ vs. stat_\n\n\nLas funciones geom_ se usan para representar puntos de datos, y sus propiedades aesthetics se usan para representar variables. Cada función geom_ agrega una capa a la gráfica.\nLas funciones stat_ son una alternativa para construir capas. Crean nuevas variables para graficar. por ejemplo conteos, proporciones, medianas, etc.\n\n\nGuía de referencia: https://rstudio.github.io/cheatsheets/html/data-visualization.html."
  },
  {
    "objectID": "lectures/lecture1.html#dos-variables-después-de-producción",
    "href": "lectures/lecture1.html#dos-variables-después-de-producción",
    "title": "R y el Tidyverse",
    "section": "Dos variables: después de producción",
    "text": "Dos variables: después de producción\n\ndelays_plot +\n    geom_hline(\n        yintercept = 0,\n        linetype = \"dashed\"\n    ) +\n    labs(\n        title = \"Retraso promedio por hora de llegada (minutos)\",\n        x = \"Hora de llegada\",\n        y = \"Retraso promedio\"\n    ) +\n    theme_minimal() +\n    scale_x_continuous(breaks = seq(0, 24, 1)) +\n    scale_y_continuous()"
  },
  {
    "objectID": "lectures/lecture1.html#tres-variables-retrasos-por-aerolínea",
    "href": "lectures/lecture1.html#tres-variables-retrasos-por-aerolínea",
    "title": "R y el Tidyverse",
    "section": "Tres variables: Retrasos por aerolínea",
    "text": "Tres variables: Retrasos por aerolínea\n\nEjemplo 6 ¿Cuál es el retraso promedio de llegada por aerolínea? ¿El tamaño de la aerolínea importa?"
  },
  {
    "objectID": "lectures/lecture1.html#tres-variables-retrasos-por-aerolínea-1",
    "href": "lectures/lecture1.html#tres-variables-retrasos-por-aerolínea-1",
    "title": "R y el Tidyverse",
    "section": "Tres variables: Retrasos por aerolínea",
    "text": "Tres variables: Retrasos por aerolínea\n\nSolución 9. Usemos dplyr para calcular el retraso promedio y el número de vuelos por aerolínea:\n\nflights_with_airlines |&gt;\n    group_by(name) |&gt;\n    summarise(\n        arr_delay = mean(arr_delay, na.rm = TRUE),\n        n = n()\n    ) |&gt;\n    ggplot(\n        aes(\n            x = reorder(name, arr_delay),\n            y = arr_delay\n        )\n    ) +\n    geom_point(aes(size = n)) +\n    geom_hline(\n        yintercept = 0,\n        linetype = \"dashed\"\n    ) +\n    labs(\n        title = \"Retrasos por aerolínea\",\n        x = \"Aerolínea\",\n        y = \"Retraso en la llegada (minutos)\",\n        size = \"Vuelos\"\n    ) +\n    coord_flip() +\n    theme_minimal()"
  },
  {
    "objectID": "lectures/lecture1.html#tarea",
    "href": "lectures/lecture1.html#tarea",
    "title": "R y el Tidyverse",
    "section": "Tarea",
    "text": "Tarea\nLeer los capítulos 1 y 4 de la segunda edición de R for Data Science de Wickham, Cetinkaya-Rundel, y Grolemund (2023).\n\nO los capítulos 3 y 4 de la primera edición.\n\nEnvíenme un correo con una idea para el proyecto final."
  },
  {
    "objectID": "lectures/lecture1.html#referencias",
    "href": "lectures/lecture1.html#referencias",
    "title": "R y el Tidyverse",
    "section": "Referencias",
    "text": "Referencias\n\n\n\n\nCrawley, Michael J. 2012. The R Book. John Wiley & Sons.\n\n\nWickham, Hadley, Mine Cetinkaya-Rundel, y Garrett Grolemund. 2023. R for Data Science: Import, Tidy, Transform, Visualize, and Model Data. 2nd edition. Beijing Boston Farnham Sebastopol Tokyo: O’Reilly Media. https://r4ds.hadley.nz/."
  },
  {
    "objectID": "lectures/lecture3.html#pregunta-de-investigación",
    "href": "lectures/lecture3.html#pregunta-de-investigación",
    "title": "Regresión lineal",
    "section": "Pregunta de investigación",
    "text": "Pregunta de investigación\nImaginemos que nos interesa estudiar la relación entre la escolaridad y el ingreso.\nEn particular, queremos estimar los rendimientos de un año adicional de escolaridad en los ingresos."
  },
  {
    "objectID": "lectures/lecture3.html#datos",
    "href": "lectures/lecture3.html#datos",
    "title": "Regresión lineal",
    "section": "Datos",
    "text": "Datos\nLa Encuesta Nacional de Ingresos y Gastos de los Hogares (ENIGH) tiene información sobre los ingresos de los hogares y la escolaridad de los miembros de los hogares.\n\nTomé a las personas que están en edad de trabajar en la ENIGH 2022: entre 18 y 65 años.\nSumé todos los ingresos que reportó cada persona.\nCreé una tabla que se llama poblacion que contiene los ingresos, el nivel aprobado, la edad y el sexo de cada persona.\nAdicionalmente, creé una variable que se llama escolaridad que contiene el número de años de escolaridad aprobados por cada persona."
  },
  {
    "objectID": "lectures/lecture3.html#exploración-de-los-datos-1",
    "href": "lectures/lecture3.html#exploración-de-los-datos-1",
    "title": "Regresión lineal",
    "section": "Exploración de los datos",
    "text": "Exploración de los datos\nAntes de estimar cualquier modelo, es importante entender cómo se distribuyen los datos.\nUna lista de preguntas para responder antes de estimar:\n\n¿Cómo se distribuyen las variables de interés?\n¿Cómo trataremos la presencia de datos atípicos?\n¿Qué otras variables pueden ser importantes para incluir en el modelo?"
  },
  {
    "objectID": "lectures/lecture3.html#descripción-de-los-datos-por-nivel-aprobado",
    "href": "lectures/lecture3.html#descripción-de-los-datos-por-nivel-aprobado",
    "title": "Regresión lineal",
    "section": "Descripción de los datos por nivel aprobado",
    "text": "Descripción de los datos por nivel aprobado\n\npoblacion |&gt;\n    summarise(\n        .by = nivelaprob,\n        n = n(),\n        ingreso = mean(ingreso, na.rm = TRUE),\n        edad = mean(edad, na.rm = TRUE),\n        poblacion = sum(factor),\n        mujeres = mean(sexo == \"Mujer\")\n    ) |&gt;\n    arrange(nivelaprob)"
  },
  {
    "objectID": "lectures/lecture3.html#descripción-de-los-datos-por-nivel-aprobado-output",
    "href": "lectures/lecture3.html#descripción-de-los-datos-por-nivel-aprobado-output",
    "title": "Regresión lineal",
    "section": "Descripción de los datos por nivel aprobado",
    "text": "Descripción de los datos por nivel aprobado\n\n# A tibble: 10 × 6\n   nivelaprob                      n ingreso  edad poblacion mujeres\n   &lt;fct&gt;                       &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n 1 Ninguno                      5650   4148.  49.2   2236391   0.576\n 2 Preescolar                     70   3972.  33.7     20893   0.414\n 3 Primaria                    38089   6265.  47.4  14830016   0.521\n 4 Secundaria                  57612   7450.  39.0  22574676   0.533\n 5 Preparatoria o bachillerato 43238   8554.  32.9  18935175   0.503\n 6 Normal                       1114  13660.  46.0    446774   0.692\n 7 Carrera técnica o comercial  5963  10435.  45.6   2825467   0.683\n 8 Profesional                 35631  14010.  34.8  16981533   0.520\n 9 Maestría                     2372  26496.  43.0   1268431   0.540\n10 Doctorado                     506  30857.  45.7    302129   0.528"
  },
  {
    "objectID": "lectures/lecture3.html#clase-factor",
    "href": "lectures/lecture3.html#clase-factor",
    "title": "Regresión lineal",
    "section": "Clase factor\n",
    "text": "Clase factor\n\nNotemos que la variable nivelaprob tiene clase factor.\n\nEsta clase es útil para representar variables categóricas.\nAsigna on orden a una serie de categorías, lo que facilita ordenar categorías por su nivel.\nPor esto, Ninguno es menor que Primaria, que es menor que Secundaria, etc.\nUna librería del tidyverse que facilita el trabajo de variables categóricas es forcats."
  },
  {
    "objectID": "lectures/lecture3.html#distribución-de-nivel-aprobado",
    "href": "lectures/lecture3.html#distribución-de-nivel-aprobado",
    "title": "Regresión lineal",
    "section": "Distribución de nivel aprobado",
    "text": "Distribución de nivel aprobado\nEl nivel aprobado determinará el número de años de escolaridad, que será nuestra variable independiente.\n\n\npoblacion |&gt;\n    ggplot(aes(x = nivelaprob, y = factor)) +\n    stat_summary(\n        aes(y = factor),\n        fun = sum,\n        geom = \"bar\",\n        fill = \"lightblue\",\n        color = \"black\"\n    ) +\n    scale_y_continuous(labels = scales::comma) +\n    labs(\n        x = \"Nivel aprobado\",\n        y = \"Personas\",\n        title = \"Distribución de la población por nivel aprobado\",\n        subtitle = \"ENIGH 2022\"\n    ) +\n    coord_flip()"
  },
  {
    "objectID": "lectures/lecture3.html#distribución-de-nivel-aprobado-output",
    "href": "lectures/lecture3.html#distribución-de-nivel-aprobado-output",
    "title": "Regresión lineal",
    "section": "Distribución de nivel aprobado",
    "text": "Distribución de nivel aprobado"
  },
  {
    "objectID": "lectures/lecture3.html#distribución-del-ingreso",
    "href": "lectures/lecture3.html#distribución-del-ingreso",
    "title": "Regresión lineal",
    "section": "Distribución del ingreso",
    "text": "Distribución del ingreso\nEl ingreso será nuestra variable dependiente.\n\n\npoblacion |&gt;\n    ggplot(aes(x = ingreso)) +\n    geom_histogram(\n        aes(y = ..density..),\n        bins = 50,\n        fill = \"lightblue\",\n        color = \"black\"\n    ) +\n    geom_density(\n        aes(y = ..density..),\n        color = \"blue\"\n    ) +\n    scale_x_log10(labels = scales::dollar) +\n    labs(\n        x = \"Ingreso mensual (escala logarítmica)\",\n        y = \"Densidad\",\n        title = \"Distribución de los ingresos\",\n        subtitle = \"ENIGH 2022\"\n    )"
  },
  {
    "objectID": "lectures/lecture3.html#distribución-del-ingreso-output",
    "href": "lectures/lecture3.html#distribución-del-ingreso-output",
    "title": "Regresión lineal",
    "section": "Distribución del ingreso",
    "text": "Distribución del ingreso"
  },
  {
    "objectID": "lectures/lecture3.html#distribución-del-ingreso-después-de-truncar",
    "href": "lectures/lecture3.html#distribución-del-ingreso-después-de-truncar",
    "title": "Regresión lineal",
    "section": "Distribución del ingreso después de truncar",
    "text": "Distribución del ingreso después de truncar\n\npoblacion &lt;- poblacion |&gt;\n    filter(\n        ingreso &lt; quantile(ingreso, 0.99, na.rm = TRUE),\n        ingreso &gt; quantile(ingreso, 0.01, na.rm = TRUE)\n    )\n\npoblacion |&gt;\n    ggplot(aes(x = ingreso)) +\n    geom_histogram(\n        aes(y = ..density..),\n        bins = 50,\n        fill = \"lightblue\",\n        color = \"black\"\n    ) +\n    geom_density(\n        aes(y = ..density..),\n        color = \"blue\"\n    ) +\n    scale_x_log10(labels = scales::dollar) +\n    labs(\n        x = \"Ingreso mensual (escala logarítmica)\",\n        y = \"Densidad\",\n        title = \"Distribución de los ingresos\",\n        subtitle = \"ENIGH 2022, truncado al 1% superior e inferior\"\n    )"
  },
  {
    "objectID": "lectures/lecture3.html#distribución-del-ingreso-después-de-truncar-output",
    "href": "lectures/lecture3.html#distribución-del-ingreso-después-de-truncar-output",
    "title": "Regresión lineal",
    "section": "Distribución del ingreso después de truncar",
    "text": "Distribución del ingreso después de truncar"
  },
  {
    "objectID": "lectures/lecture3.html#ingreso-promedio-por-nivel-aprobado",
    "href": "lectures/lecture3.html#ingreso-promedio-por-nivel-aprobado",
    "title": "Regresión lineal",
    "section": "Ingreso promedio por nivel aprobado",
    "text": "Ingreso promedio por nivel aprobado\nUna manera de aproximarnos a la relación entre escolaridad e ingreso es calcular el ingreso promedio por nivel aprobado.\n\n\nniveles &lt;- poblacion |&gt;\n    group_by(nivelaprob) |&gt;\n    summarise(\n        ingreso_prom = weighted.mean(x = ingreso,w = factor, na.rm = TRUE),\n        sd = sd(ingreso, na.rm = TRUE),\n        n = n()\n    ) |&gt;\n    ungroup() |&gt;\n    mutate(\n        lower = ingreso_prom - 1.96 * sd / sqrt(n),\n        upper = ingreso_prom + 1.96 * sd / sqrt(n)\n    ) \n    \nniveles\n\n\n\n# A tibble: 10 × 6\n   nivelaprob                  ingreso_prom     sd     n  lower  upper\n   &lt;fct&gt;                              &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1 Ninguno                            3830.  4063.  4059  3705.  3955.\n 2 Preescolar                         4153.  3129.    53  3311.  4995.\n 3 Primaria                           5653.  5329. 29975  5593.  5713.\n 4 Secundaria                         6973.  5833. 46034  6920.  7026.\n 5 Preparatoria o bachillerato        8026.  6765. 34270  7954.  8097.\n 6 Normal                            13021.  8456.   994 12496. 13547.\n 7 Carrera técnica o comercial        9541.  7709.  4745  9322.  9760.\n 8 Profesional                       12349.  9272. 28685 12241. 12456.\n 9 Maestría                          19768. 11131.  2053 19287. 20250.\n10 Doctorado                         22276. 11789.   427 21158. 23394."
  },
  {
    "objectID": "lectures/lecture3.html#ingreso-promedio-por-nivel-aprobado-1",
    "href": "lectures/lecture3.html#ingreso-promedio-por-nivel-aprobado-1",
    "title": "Regresión lineal",
    "section": "Ingreso promedio por nivel aprobado",
    "text": "Ingreso promedio por nivel aprobado\n\nniveles |&gt;\n    ggplot(aes(x = nivelaprob, y = ingreso_prom)) +\n    geom_pointrange(\n        aes(\n            ymin = lower,\n            ymax = upper\n        )\n    ) +\n    scale_y_continuous(\n        labels = scales::dollar,\n        breaks = seq(5000, 40000, 5000)\n    ) +\n    labs(\n        x = \"Nivel aprobado\",\n        y = \"Ingreso promedio\",\n        title = \"Ingreso promedio por nivel aprobado\",\n        subtitle = \"Intervalos de confianza del 95%\"\n    )"
  },
  {
    "objectID": "lectures/lecture3.html#ingreso-promedio-por-nivel-aprobado-1-output",
    "href": "lectures/lecture3.html#ingreso-promedio-por-nivel-aprobado-1-output",
    "title": "Regresión lineal",
    "section": "Ingreso promedio por nivel aprobado",
    "text": "Ingreso promedio por nivel aprobado"
  },
  {
    "objectID": "lectures/lecture3.html#distribución-del-ingreso-por-nivel-aprobado-y-sexo",
    "href": "lectures/lecture3.html#distribución-del-ingreso-por-nivel-aprobado-y-sexo",
    "title": "Regresión lineal",
    "section": "Distribución del ingreso por nivel aprobado y sexo",
    "text": "Distribución del ingreso por nivel aprobado y sexo\nA pesar de que los promedios son muy informativos, esconden la distribución de los datos.\n\nAdicionalmente, queremos preguntarnos si el ingreso es diferente para hombres y mujeres, para cada nivel aprobado.\n\n\nEl diagrama de caja y brazo (boxplot) visualiza la distribución de los datos mostrando:\n\nLa mediana (línea negra),\nEl rango intercuartílico (IQR) (caja): el conjunto de valores centrales que acumulan el 50% de los datos.\nLos brazos, que son los valores que están dentro de 1.5 veces el IQR.\nLos puntos que están fuera de los brazos son considerados outliers."
  },
  {
    "objectID": "lectures/lecture3.html#distribución-del-ingreso-por-nivel-aprobado-y-sexo-1",
    "href": "lectures/lecture3.html#distribución-del-ingreso-por-nivel-aprobado-y-sexo-1",
    "title": "Regresión lineal",
    "section": "Distribución del ingreso por nivel aprobado y sexo",
    "text": "Distribución del ingreso por nivel aprobado y sexo\n\npoblacion |&gt;\n    ggplot(\n        aes(\n            x = nivelaprob, \n            y = ingreso, \n            fill = sexo\n            )) +\n    geom_boxplot(alpha = 0.5) +\n    scale_y_log10(labels = scales::dollar) +\n    labs(\n        x = \"Nivel aprobado\",\n        y = \"Ingreso mensual (escala logarítmica)\",\n        title = \"Distribución del ingreso por nivel aprobado y sexo\",\n        fill = \"\"\n    ) +\n    theme(legend.position = \"top\")"
  },
  {
    "objectID": "lectures/lecture3.html#distribución-del-ingreso-por-nivel-aprobado-y-sexo-1-output",
    "href": "lectures/lecture3.html#distribución-del-ingreso-por-nivel-aprobado-y-sexo-1-output",
    "title": "Regresión lineal",
    "section": "Distribución del ingreso por nivel aprobado y sexo",
    "text": "Distribución del ingreso por nivel aprobado y sexo"
  },
  {
    "objectID": "lectures/lecture3.html#escolaridad-y-edad",
    "href": "lectures/lecture3.html#escolaridad-y-edad",
    "title": "Regresión lineal",
    "section": "Escolaridad y edad",
    "text": "Escolaridad y edad\nOtra variable que puede ser importante para el ingreso es la edad:\n\nPuede estar correlacionada con escolaridad, porque las personas más viejas han tenido más tiempo para estudiar.\nTambién puede estar correlacionada con el ingreso, porque las personas más viejas tienen más experiencia y más apego al mercado laboral.\n\n\n\npoblacion |&gt;\n    ggplot(aes(x = nivelaprob, y = edad)) +\n    geom_boxplot(fill = \"lightblue\", alpha = 0.5) +\n    coord_flip() +\n    labs(\n        x = \"Nivel aprobado\",\n        y = \"Edad\",\n        title = \"Distribución de la edad por nivel aprobado\"\n    )"
  },
  {
    "objectID": "lectures/lecture3.html#escolaridad-y-edad-output",
    "href": "lectures/lecture3.html#escolaridad-y-edad-output",
    "title": "Regresión lineal",
    "section": "Escolaridad y edad",
    "text": "Escolaridad y edad"
  },
  {
    "objectID": "lectures/lecture3.html#imputación-de-años-de-escolaridad-según-el-nivel-aprobado",
    "href": "lectures/lecture3.html#imputación-de-años-de-escolaridad-según-el-nivel-aprobado",
    "title": "Regresión lineal",
    "section": "Imputación de años de escolaridad según el nivel aprobado",
    "text": "Imputación de años de escolaridad según el nivel aprobado\nLa ENIGH incluye el nivel y el grado de estudios aprobados, reportados por cada persona.\n\nPero no incluye los años de escolaridad.\n\n\nCreé la variable escolaridad a partir de la variable nivelaprob y gradoaprob."
  },
  {
    "objectID": "lectures/lecture3.html#relación-no-paramétrica-entre-escolaridad-e-ingreso",
    "href": "lectures/lecture3.html#relación-no-paramétrica-entre-escolaridad-e-ingreso",
    "title": "Regresión lineal",
    "section": "Relación no paramétrica entre escolaridad e ingreso",
    "text": "Relación no paramétrica entre escolaridad e ingreso\nDecimos que estimamos un modelo no paramétrico cuando le permitimos al modelo que se ajuste a los datos sin imponerle una forma funcional.\n\nLa función ggplot2::geom_smooth() ajusta un modelo no paramétrico a los datos, de la siguiente manera:\n\\[\nY_i = f(X_i) + \\epsilon_i\n\\]\ndonde:\n\n\\(Y_i\\) es el variable dependiente: el ingreso de la persona \\(i\\),\n\\(X_i\\) es el variable independiente: la escolaridad de la persona \\(i\\), y\n\\(f(\\cdot)\\) es una función que se ajusta a los datos.\n\\(\\epsilon_i\\) es el error de estimación de la persona \\(i\\).\n\n\n\nDependiendo de las características de los datos, geom_smooth() ajusta diferentes tipos de modelos no paramétricos."
  },
  {
    "objectID": "lectures/lecture3.html#relación-no-paramétrica-entre-escolaridad-e-ingreso-1",
    "href": "lectures/lecture3.html#relación-no-paramétrica-entre-escolaridad-e-ingreso-1",
    "title": "Regresión lineal",
    "section": "Relación no paramétrica entre escolaridad e ingreso",
    "text": "Relación no paramétrica entre escolaridad e ingreso\n\npoblacion |&gt;\n    ggplot(aes(x = escolaridad, y = ingreso)) +\n    stat_summary() + # Promedio y IC\n    geom_smooth() +  # Ajuste no paramétrico\n    scale_y_log10(labels = scales::dollar) +\n    labs(\n        x = \"Escolaridad\",\n        y = \"Ingreso mensual\",\n        title = \"Relación entre escolaridad e ingreso\",\n        subtitle = \"Tamaño de los puntos proporcional al número de personas\"\n    ) +\n    theme(legend.position = \"top\") +\n    scale_size_continuous(\n        range = c(1, 10),\n        labels = scales::comma,\n        name = \"Personas\"\n    )"
  },
  {
    "objectID": "lectures/lecture3.html#relación-no-paramétrica-entre-escolaridad-e-ingreso-1-output",
    "href": "lectures/lecture3.html#relación-no-paramétrica-entre-escolaridad-e-ingreso-1-output",
    "title": "Regresión lineal",
    "section": "Relación no paramétrica entre escolaridad e ingreso",
    "text": "Relación no paramétrica entre escolaridad e ingreso"
  },
  {
    "objectID": "lectures/lecture3.html#conclusiones-de-la-exploración",
    "href": "lectures/lecture3.html#conclusiones-de-la-exploración",
    "title": "Regresión lineal",
    "section": "Conclusiones de la exploración",
    "text": "Conclusiones de la exploración\n\nLas personas que reportan un nivel aprobado más alto tienen salarios más altos en promedio.\nLas mujeres reportaron ingresos, dado que tienen el mismo nivel aprobado, en todos los niveles aprobados.\nLa distribución de la edad es diferente para cada nivel aprobado. Las personas sin escolaridad som más viejas.\n\nNo hay una manera perfecta de imputar la escolaridad, pero podemos ver que se acumulan datos en el último grado de cada nivel aprobado, lo que sugiere que esas personas completaron el nivel.\n\nEsto puede ser importante para la estimación de los rendimientos de la escolaridad: puede ser que aprobar el último grado de un nivel tenga un efecto más grande que aprobar el primer grado de un nivel.\n\n\nLa imputación de escolaridad parece reflejar correctamente la relación entre escolaridad e ingreso."
  },
  {
    "objectID": "lectures/lecture3.html#modelo-de-regresión-lineal-1",
    "href": "lectures/lecture3.html#modelo-de-regresión-lineal-1",
    "title": "Regresión lineal",
    "section": "Modelo de regresión lineal",
    "text": "Modelo de regresión lineal\nYa sabemos bien cuál es el ingreso promedio por año de escolaridad.\n\nSin embargo, todavía nos falta estimar cuánto aumenta el ingreso por cada año adicional de escolaridad: el rendimiento de la escolaridad."
  },
  {
    "objectID": "lectures/lecture3.html#simulación-de-un-modelo-de-regresión-lineal",
    "href": "lectures/lecture3.html#simulación-de-un-modelo-de-regresión-lineal",
    "title": "Regresión lineal",
    "section": "Simulación de un modelo de regresión lineal",
    "text": "Simulación de un modelo de regresión lineal\nImaginemos un mundo en el que el ingreso solo depende de la escolaridad.\n\nEn este mundo, el ingreso se determina como función de la escolaridad de la siguiente manera:\n\\[\nY_i = 1000 + 200 X_i + \\epsilon_i\n\\]\n\n\ndonde:\n\n\\(Y_i\\) es el ingreso de la persona \\(i\\),\n\\(X_i\\) es la escolaridad de la persona \\(i\\),\n\\(\\epsilon_i\\) es el error de estimación de la persona \\(i\\), distribuido \\(N(\\mu = 0, \\sigma = 1,000)\\).\n\n\n\nUna persona sin educación (\\(X_i=0\\)) en promedio tendrá \\(1,000\\).\n\n\nDespués, por cada año adicional de escolaridad, el ingreso aumentará en promedio \\(200\\).\n\n\nPero, como hay un error de estimación, no todas las personas con la misma escolaridad tendrán el mismo ingreso."
  },
  {
    "objectID": "lectures/lecture3.html#simulación-de-un-modelo-de-regresión-lineal-1",
    "href": "lectures/lecture3.html#simulación-de-un-modelo-de-regresión-lineal-1",
    "title": "Regresión lineal",
    "section": "Simulación de un modelo de regresión lineal",
    "text": "Simulación de un modelo de regresión lineal\n\nset.seed(1234)\n\nn &lt;- 1000\n\ningresos_simulados &lt;- tibble(\n    id = 1:n,\n    escolaridad = runif(n, min = 0, max = 25),\n    ingreso = 1000 + (200 * escolaridad) + rnorm(n, mean = 0, sd = 1000)\n) \n\ningresos_simulados |&gt;\n    ggplot(aes(x = escolaridad, y = ingreso)) +\n    geom_point()"
  },
  {
    "objectID": "lectures/lecture3.html#simulación-de-un-modelo-de-regresión-lineal-1-output",
    "href": "lectures/lecture3.html#simulación-de-un-modelo-de-regresión-lineal-1-output",
    "title": "Regresión lineal",
    "section": "Simulación de un modelo de regresión lineal",
    "text": "Simulación de un modelo de regresión lineal"
  },
  {
    "objectID": "lectures/lecture3.html#modelo-de-regresión-lineal-2",
    "href": "lectures/lecture3.html#modelo-de-regresión-lineal-2",
    "title": "Regresión lineal",
    "section": "Modelo de regresión lineal",
    "text": "Modelo de regresión lineal\nAhora, si no conociéramos el proceso de generación de datos, podríamos preguntarnos cuál es el rendimiento de la educación es este mundo.\n\nPodemos estimar un modelo de regresión lineal, descrito con la siguiente ecuación:\n\\[\ny_i=\\beta_0 + \\beta_1 x_i + \\epsilon_i\n\\]\n\n\ndonde:\n\n\\(\\beta_0\\) es el intercepto del modelo, que representa el ingreso promedio de una persona sin escolaridad (\\(X_i=0\\)).\n\\(\\beta_1\\) es la pendiente del modelo, que representa el rendimiento de la escolaridad: el cambio en el ingreso por cada año adicional de escolaridad.\n\\(\\epsilon_i\\) es el error de estimación de la persona \\(i\\), que representa la diferencia entre su ingreso real y el ingreso estimado por el modelo. Asumimos que \\(\\epsilon_i\\) es distribuido \\(N(\\mu = 0, \\sigma^2)\\).\n\n\n\nVamos a buscar los valores de \\(\\beta_0\\) y \\(\\beta_1\\) que mejor se ajusten a los datos."
  },
  {
    "objectID": "lectures/lecture3.html#estimación-del-modelo",
    "href": "lectures/lecture3.html#estimación-del-modelo",
    "title": "Regresión lineal",
    "section": "Estimación del modelo",
    "text": "Estimación del modelo\n\nEjemplo 1 Imaginemos que una persona tomadora de decisiones nos propone que:\n\\[\n\\beta_0=0; \\quad \\beta_1=300\n\\]\n\nPodemos calcular el ingreso estimado \\(\\hat y_i\\) de cada persona y el error de estimación \\(\\hat \\epsilon_i\\):\n\ningresos_simulados &lt;- ingresos_simulados |&gt;\n    mutate(\n        y_hat_1 = 0 + (300 * escolaridad),\n        error_1 = ingreso - y_hat_1\n    )"
  },
  {
    "objectID": "lectures/lecture3.html#estimación-del-modelo-output",
    "href": "lectures/lecture3.html#estimación-del-modelo-output",
    "title": "Regresión lineal",
    "section": "Estimación del modelo",
    "text": "Estimación del modelo"
  },
  {
    "objectID": "lectures/lecture3.html#estimación-del-modelo-1",
    "href": "lectures/lecture3.html#estimación-del-modelo-1",
    "title": "Regresión lineal",
    "section": "Estimación del modelo",
    "text": "Estimación del modelo"
  },
  {
    "objectID": "lectures/lecture3.html#bondad-de-ajuste",
    "href": "lectures/lecture3.html#bondad-de-ajuste",
    "title": "Regresión lineal",
    "section": "Bondad de ajuste",
    "text": "Bondad de ajuste\n¿Qué tan bien se ajusta el modelo a los datos observados?\n\nHay muchas métricas para evaluar el ajuste de un modelo de regresión lineal.\nUna métrica común es la raíz cuadrada del error cuadrático medio (RMSE por sus siglas en inglés):\n\n\n\\[\nRMSE = \\sqrt{\\frac{1}{n} \\sum_{i=1}^n \\hat \\epsilon_i^2}\n\\]\nElevamos al cuadrado el error para penalizar los errores negativos y positivos, y penalizar más a los errores grandes.\n\n\nSacamos raíz cuadrada para que la métrica esté en la misma escala que la variable dependiente."
  },
  {
    "objectID": "lectures/lecture3.html#rmse",
    "href": "lectures/lecture3.html#rmse",
    "title": "Regresión lineal",
    "section": "RMSE",
    "text": "RMSE\n\ningresos_simulados |&gt;\n    summarise(\n        rmse = sqrt(mean(error_1^2))\n    )\n\n\n\n# A tibble: 1 × 1\n   rmse\n  &lt;dbl&gt;\n1 1247.\n\n\n\nEn promedio, el modelo planteado por la persona tomadora de decisiones tiene un error de estimación de \\(1,244\\).\n\n\nEste error es mayor a la desviación estándar de los ingresos, que es \\(1,000\\)."
  },
  {
    "objectID": "lectures/lecture3.html#estimación-por-mínimos-cuadrados",
    "href": "lectures/lecture3.html#estimación-por-mínimos-cuadrados",
    "title": "Regresión lineal",
    "section": "Estimación por mínimos cuadrados",
    "text": "Estimación por mínimos cuadrados\nMínimos cuadrados ordinarios (MCO) es un método común para estimar los parámetros de un modelo de regresión lineal.\n\nLo que hace es minimizar la suma de los cuadrados de los errores de estimación.\n\n\nPodríamos hacer la derivación de la función de error y encontrar los valores de \\(\\beta_0\\) y \\(\\beta_1\\) que minimizan la suma de los cuadrados.\n\n\nPero no lo haremos aquí, porque R lo hace por nosotros."
  },
  {
    "objectID": "lectures/lecture3.html#estimación-del-modelo-2",
    "href": "lectures/lecture3.html#estimación-del-modelo-2",
    "title": "Regresión lineal",
    "section": "Estimación del modelo",
    "text": "Estimación del modelo\nLa función base para estimar regresiones por MCO es stats::lm().\n\nEl lenguaje para describirle a R el modelo que queremos estimar es:\n\nmodel_fit &lt;- lm(y ~ x, data = datos)\n\n\n\n\nEn nuestro caso, el modelo es:\n\ningresos_sim_fit &lt;- lm(ingreso ~ escolaridad, data = ingresos_simulados)\n\nsummary(ingresos_sim_fit)\n\n\n\n\nCall:\nlm(formula = ingreso ~ escolaridad, data = ingresos_simulados)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2919.33  -629.56    10.84   638.19  2731.78 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 1044.491     60.275   17.33   &lt;2e-16 ***\nescolaridad  195.571      4.122   47.44   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 948.6 on 998 degrees of freedom\nMultiple R-squared:  0.6928,    Adjusted R-squared:  0.6925 \nF-statistic:  2251 on 1 and 998 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "lectures/lecture3.html#estimación-del-modelo-2-output",
    "href": "lectures/lecture3.html#estimación-del-modelo-2-output",
    "title": "Regresión lineal",
    "section": "Estimación del modelo",
    "text": "Estimación del modelo"
  },
  {
    "objectID": "lectures/lecture3.html#visualización-del-modelo-mco",
    "href": "lectures/lecture3.html#visualización-del-modelo-mco",
    "title": "Regresión lineal",
    "section": "Visualización del modelo MCO",
    "text": "Visualización del modelo MCO\n\ningresos_simulados &lt;- ingresos_simulados |&gt;\n    mutate(\n        y_hat_2 = fitted(ingresos_sim_fit), # Saca los valores ajustados\n        error_2 = residuals(ingresos_sim_fit) \n    )"
  },
  {
    "objectID": "lectures/lecture3.html#visualización-del-modelo-mco-output",
    "href": "lectures/lecture3.html#visualización-del-modelo-mco-output",
    "title": "Regresión lineal",
    "section": "Visualización del modelo MCO",
    "text": "Visualización del modelo MCO"
  },
  {
    "objectID": "lectures/lecture3.html#comparación-de-los-modelos",
    "href": "lectures/lecture3.html#comparación-de-los-modelos",
    "title": "Regresión lineal",
    "section": "Comparación de los modelos",
    "text": "Comparación de los modelos"
  },
  {
    "objectID": "lectures/lecture3.html#comparación-de-los-modelos-1",
    "href": "lectures/lecture3.html#comparación-de-los-modelos-1",
    "title": "Regresión lineal",
    "section": "Comparación de los modelos",
    "text": "Comparación de los modelos\nUna vez que tenemos los dos modelos, podemos comparar el error de estimación de cada uno.\n\n\ningresos_simulados |&gt;\n    summarise(\n        rmse_1 = sqrt(mean(error_1^2, na.rm = TRUE)),\n        rmse_2 = sqrt(mean(error_2^2, na.rm = TRUE))\n    )\n\n\n\n# A tibble: 1 × 2\n  rmse_1 rmse_2\n   &lt;dbl&gt;  &lt;dbl&gt;\n1  1247.   948.\n\n\n\n\nEl modelo estimado con MCO tiene un RMSE más bajo que el modelo propuesto, porque MCO encuentra la línea que minimiza el error de estimación."
  },
  {
    "objectID": "lectures/lecture3.html#rendimientos-de-la-escolaridad",
    "href": "lectures/lecture3.html#rendimientos-de-la-escolaridad",
    "title": "Regresión lineal",
    "section": "Rendimientos de la escolaridad",
    "text": "Rendimientos de la escolaridad\nPara modelos lineales, la función fixest::feols() tiene mejor rendimiento que lm(), además de que es más fácil presentar resultados usando fixest::etable().\n\nfeols() guarda la misma sintaxis que lm().\n\n\n\npacman::p_load(fixest)\n\ningresos_fit &lt;- feols(ingreso ~ escolaridad, data = ingresos_simulados)\npoblacion_fit &lt;- feols(ingreso ~ escolaridad, data = poblacion)"
  },
  {
    "objectID": "lectures/lecture3.html#rendimientos-de-la-escolaridad-output",
    "href": "lectures/lecture3.html#rendimientos-de-la-escolaridad-output",
    "title": "Regresión lineal",
    "section": "Rendimientos de la escolaridad",
    "text": "Rendimientos de la escolaridad"
  },
  {
    "objectID": "lectures/lecture3.html#rendimientos-de-la-escolaridad-1",
    "href": "lectures/lecture3.html#rendimientos-de-la-escolaridad-1",
    "title": "Regresión lineal",
    "section": "Rendimientos de la escolaridad",
    "text": "Rendimientos de la escolaridad\n```{r}\n#| label: fig-ols\n#| results: asis\n\netable(\n    ingresos_fit,\n    poblacion_fit,\n    title = \"Modelo de regresión lineal\",\n    fitstat = ~ n + r2 + my + f,\n    markdown = T\n)\n```\n\n\n\n\n\nEn promedio, un año adicional de escolaridad está relacionado con un ingreso adicional de $571 pesos al mes.\nEn promedio, una persona sin escolaridad tiene un ingreso mensual de $1,364.\n\n\\(R^2\\) es una métrica de bondad de ajuste que mide la proporción de la varianza de la variable dependiente que es explicada por el modelo.\n\nLa escolaridad explica el 12% de la variación del ingreso en la población, mientras que el modelo simulado explica el 70% de la variación del ingreso.\nEsto es esperado, porque definimos el modelo simulado de tal manera que la escolaridad es la única variable que afecta el ingreso."
  },
  {
    "objectID": "lectures/lecture3.html#variabilidad-en-los-estimadores",
    "href": "lectures/lecture3.html#variabilidad-en-los-estimadores",
    "title": "Regresión lineal",
    "section": "Variabilidad en los estimadores",
    "text": "Variabilidad en los estimadores\nEstudiaremos la variabilidad de los estimadores de los coeficientes del modelo MCO en el mundo simulado que tenemos.\n\nImaginemos que tomamos métricas de escolaridad y de ingresos en una muestra aleatoria diferente, pero que comparte las características de la población simulada original.\ningresos_simulados_2 &lt;- tibble(\n    id = 1:n,\n    escolaridad = runif(n, min = 0, max = 25),\n    ingreso = 1000 + (200 * escolaridad) + rnorm(n, mean = 0, sd = 1000)\n) \n\ningresos_sim_fit &lt;- feols(ingreso ~ escolaridad, data = ingresos_simulados)\ningresos_sim_fit_2 &lt;- feols(ingreso ~ escolaridad, data = ingresos_simulados_2)\n\netable(\n    ingresos_sim_fit,\n    ingresos_sim_fit_2,\n    title = \"Modelo de regresión lineal\",\n    fitstat = ~ n + r2 + my + f,\n    markdown = T\n)\n\n\n\n\n\nEncontramos que los coeficientes han variado al usar una muestra diferente."
  },
  {
    "objectID": "lectures/lecture3.html#variabilidad-en-los-estimadores-1",
    "href": "lectures/lecture3.html#variabilidad-en-los-estimadores-1",
    "title": "Regresión lineal",
    "section": "Variabilidad en los estimadores",
    "text": "Variabilidad en los estimadores\nAhora cuantificaremos la variabilidad de los estimadores de los coeficientes para muchas muestras aleatorias, para entender cómo se distribuyen.\n\nn_sim &lt;- 1000\n\n\nsimular_datos &lt;- function(x, n = 1000) {\n    tibble(\n        id = 1:n,\n        escolaridad = runif(n, min = 0, max = 25),\n        ingreso = 1000 + (200 * escolaridad) + rnorm(n, mean = 0, sd = 1000)\n    ) \n}\n\n\nsimulaciones &lt;- tibble(\n    id = 1:n_sim,\n    simulacion = map(id, simular_datos),\n    fit = map(simulacion, ~ feols(ingreso ~ escolaridad, data = .x)),\n    coef = map(fit, coef),\n    intercept = map_dbl(coef, 1),\n    escolaridad = map_dbl(coef, 2)\n) |&gt;\n    select(id, intercept, escolaridad)"
  },
  {
    "objectID": "lectures/lecture3.html#variabilidad-en-los-estimadores-1-output",
    "href": "lectures/lecture3.html#variabilidad-en-los-estimadores-1-output",
    "title": "Regresión lineal",
    "section": "Variabilidad en los estimadores",
    "text": "Variabilidad en los estimadores"
  },
  {
    "objectID": "lectures/lecture3.html#variabilidad-en-los-estimadores-2",
    "href": "lectures/lecture3.html#variabilidad-en-los-estimadores-2",
    "title": "Regresión lineal",
    "section": "Variabilidad en los estimadores",
    "text": "Variabilidad en los estimadores\n\n\n\nLos coeficientes de MCO siguen una distribución normal.\n\nEsto sigue de que su interpretación es promedio.\n\n\n\n¡La media de los coeficientes estimados es igual al verdadero valor de los coeficientes!\n\nEsto es una propiedad de los estimadores de MCO: son insesgados.\nEsto significa que, en promedio, el estimador de MCO es igual al verdadero valor del parámetro.\n\n\nLa inferencia de los coeficientes sigue de la misma manera que una prueba de hipótesis de un promedio."
  },
  {
    "objectID": "lectures/lecture3.html#inferencia-para-coeficientes-1",
    "href": "lectures/lecture3.html#inferencia-para-coeficientes-1",
    "title": "Regresión lineal",
    "section": "Inferencia para coeficientes",
    "text": "Inferencia para coeficientes\nRegresemos a la tabla de coeficientes, donde podremos encontrar algunas pruebas de hipótesis ya calculadas.\n\n\n\n\nEl error estándar de los coeficientes es una medida de la variabilidad de los estimadores, en la misma escala que los coeficientes.\nSi multiplicamos el error estándar por 1.96, obtenemos un intervalo de confianza del 95% para el coeficiente.\nSi el intervalo de confianza no incluye 0, podemos rechazar la hipótesis nula de que el coeficiente es igual a 0.\nLas estrellas indican para qué niveles de significancia podemos rechazar la hipótesis nula de que el coeficiente es igual a 0.\nAdicionalmente, la prueba F es una prueba conjunta de la relevancia del modelo completo. Un valor mayor a 100 indica que el modelo es relevante.\n\n\nNuestros dos modelos, el simulado y el de la ENIGH, tienen un coeficiente de escolaridad significativo al 1% y son modelos relevantes."
  },
  {
    "objectID": "lectures/lecture3.html#educación-e-ingresos",
    "href": "lectures/lecture3.html#educación-e-ingresos",
    "title": "Regresión lineal",
    "section": "Educación e ingresos",
    "text": "Educación e ingresos\nQueremos estimar el efecto de la escolaridad en los ingresos.\n\nSin embargo, puede haber una variable habilidad que determina tanto la escolaridad como el ingreso.\n\n\n\n\n\n\n\n\n\n\n\n\n¿Cómo afectaría la omisión de la variable habilidad a la estimación del modelo de regresión lineal?"
  },
  {
    "objectID": "lectures/lecture3.html#sesgo-por-variable-omitida-1",
    "href": "lectures/lecture3.html#sesgo-por-variable-omitida-1",
    "title": "Regresión lineal",
    "section": "Sesgo por variable omitida",
    "text": "Sesgo por variable omitida\nEn la ENIGH no tenemos información sobre la variable habilidad…\n\n¡Pero podemos simularla!\n\nhabilidad_sim &lt;- tibble(\n    id = 1:n,\n    habilidad = rnorm(n, mean = 0, sd = 1),\n    escolaridad = 2 * habilidad + rnorm(n, mean = 0, sd = 1),\n    ingreso = 1000 + (200 * escolaridad) + (500 * habilidad) + rnorm(n, mean = 0, sd = 1000)\n)\n\n\n\n\n\n\nEl modelo que omitió la variable habilidad sobreestimó el efecto de la escolaridad en el ingreso.\nEsto siempre pasará cuando exista una variable omitida que esté correlacionada con la variable dependiente y la variable independiente."
  },
  {
    "objectID": "lectures/lecture3.html#sesgo-por-variable-omitida-1-output",
    "href": "lectures/lecture3.html#sesgo-por-variable-omitida-1-output",
    "title": "Regresión lineal",
    "section": "Sesgo por variable omitida",
    "text": "Sesgo por variable omitida"
  },
  {
    "objectID": "lectures/lecture3.html#modelo-de-regresión-lineal-múltiple",
    "href": "lectures/lecture3.html#modelo-de-regresión-lineal-múltiple",
    "title": "Regresión lineal",
    "section": "Modelo de regresión lineal múltiple",
    "text": "Modelo de regresión lineal múltiple\nRecordemos que encontramos que las variables sexo y edad también pueden ser determinantes del ingreso y de la escolaridad.\n\nNo incluirlas puede sesgar el estimador del rendimiento de la escolaridad.\n\n\nPara controlar por estas variables, podemos incluirlas en el modelo de regresión lineal.\n\n\n\n\n\n\nAgregar edad y sexo alivia la preocupación de que puedan estar sesgando el estimador del rendimiento de la escolaridad.\n\nSin embargo, cambiará la interpretación de los coeficientes:\n\nEl intercepto en la columna (2), ahora representa el ingreso promedio de una persona sin educación y de edad = 0. Este estimador carece de sentido en este contexto.\nEl coeficiente de escolaridad en la columna (2) indica que un año adicional de escolaridad está asociado con un aumento de $655 en el ingreso, dejando la edad constante.\n\n\n\nSexo es una variable dicotómica.\n\nEl intercepto de la columna (3) representa el ingreso promedio de un hombre sin escolaridad.\nEl coeficiente de escolaridad en la columna (3) indica que un año adicional de escolaridad está asociado con un aumento de $586 en el ingreso, dejando el sexo constante.\nEl coeficiente de sexo indica que, en promedio, las mujeres tienen un ingreso $3,100 menor que los hombres, dejando la escolaridad constante.\n\n\nAl incluir ambas variables, el coeficiente de escolaridad en la columna (4) indica que un año adicional de escolaridad está asociado con un aumento de $672.6 en el ingreso, dejando las demás variables constantes."
  },
  {
    "objectID": "lectures/lecture3.html#referencias",
    "href": "lectures/lecture3.html#referencias",
    "title": "Regresión lineal",
    "section": "Referencias",
    "text": "Referencias\n\n\n\n\nAguilar Esteva, Arturo. s. f. «Notas de Microeconometría». https://bookdown.org/viclzrz/notasmicro/.\n\n\nWorld Bank, y Harry Patrinos. 2016. «Estimating the Return to Schooling Using the Mincer Equation». IZA World of Labor. https://doi.org/10.15185/izawol.278."
  },
  {
    "objectID": "resources.html",
    "href": "resources.html",
    "title": "Recursos",
    "section": "",
    "text": "Algunos recursos útiles para el curso son:\n\nBase R\nTidyverse\n\nData Import\nData Transformation\nData Visualization\n\nQuarto\nMuchas más en Posit Cheatsheets"
  }
]